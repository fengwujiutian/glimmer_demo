YUI.add("note-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{create:function(t){return e.ModelCreators["flickr-photos-addNotes"].run(t,this.appContext)},update:function(t,n){var r;return r={noteId:t,noteX:this.getValue(t,"left"),noteY:this.getValue(t,"top"),noteW:this.getValue(t,"width"),noteH:this.getValue(t,"height"),noteText:this.getValue(t,"text")},e.ModelUpdaters["flickr-photos-editNote"].run(r,this.appContext)},"delete":function(t){return e.ModelDeletors["flickr-photos-deleteNote"].run(t,this.appContext)}},attributes:{authorName:{setter:function(e){return e}},author:{setter:function(e){return e}},left:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},top:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},width:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},height:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},text:{setter:function(e){return e}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-photos-addNotes-creator","flickr-photos-editNote-updater","flickr-photos-deleteNote-deletor","attribute-helpers"]});
YUI.add("flickr-photos-deleteAutotags-deletor",function(e,t){"use strict";function n(n,r){return r.callAPI("flickr.photos.deleteAutotags",n).then(null,e.FetcherErrorLogger(t))}e.namespace("ModelDeletors")["flickr-photos-deleteAutotags"]={run:n}},"@VERSION@",{requires:["flickr-promise"],optional:[]});
YUI.add("autotag-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{"delete":function(t){return e.ModelDeletors["flickr-photos-deleteAutotags"].run(t,this.appContext)}},attributes:{autotagValue:{validator:function(t){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},score:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},isPrivate:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},searchUrl:{derivedBy:["autotagValue"],readOnly:!0,defaultFn:function(e){var t=this.getValue(e,"autotagValue");return"/search/?q="+t}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-photos-deleteAutotags-deletor"]});
YUI.add("photo-autotags-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{"delete":function(t){return e.ModelDeletors["flickr-photos-deleteAutotags"].run(t,this.appContext)}},attributes:{autotags:{isCollection:!0}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-photos-deleteAutotags-deletor"]});
YUI.add("flickr-photos-setPerms-updater",function(e,t){"use strict";function n(e,t){var n=e[0],r=e[1],i;i=r.attributeSearch({normalizedId:t.nsid},!0),i.forEach(function(e){r.remove(e)});if(t.full_response)return n.photoIdsSent=t.photo_ids,n}function r(n,r){var i=this;return n.nsid=r.getViewer().nsid,e.Promise.all([r.callAPI("flickr.photos.setPerms",n),r.getModelRegistry("photostream-models")]).then(function(e){return i._processResponse(e,n)},e.FetcherErrorLogger(t))}e.namespace("ModelUpdaters")["flickr-photos-setPerms"]={run:r,_processResponse:n}},"@VERSION@",{requires:["flickr-promise"]});
YUI.add("flickr-photos-setMeta-updater",function(e,t){"use strict";function n(n,r){var i={};return n.fullResponse?(i.full_response=1,i.photo_ids=n.photoId):i.photo_id=n.photoId,typeof n.title!="undefined"&&(i.title=n.title),typeof n.description!="undefined"&&(i.description=n.description),e.Promise.all([r.callAPI("flickr.photos.setMeta",i),r.getModelRegistry("photo-models")]).then(function(t){var r=t[0],i=t[1];if(n.fullResponse){if("errors"in r)return r.api="setMeta",r}else{if(!i.exists(n.photoId))throw new Error("[flickr-photos-setMeta-updater] - Photo model can not be updated if it does not exist");!r.photo||!r.photo.title||!r.photo.description?e.Flog.warn("[flickr-photos-setMeta-updater] - No updated data returned from API."):i.setValues(n.photoId,{title:r.photo.title.content,description:r.photo.description.content})}},function(e){throw n.fullResponse&&(e.photoIds=n.photoId,e.returnApi="setMeta"),e}).then(null,e.FetcherErrorLogger(t))}e.namespace("ModelUpdaters")["flickr-photos-setMeta"]={run:n}},"@VERSION@",{requires:["flickr-promise","flog"],optional:[]});
YUI.add("flickr-photos-licenses-setLicense-updater",function(e,t){"use strict";function n(n,r){var i={};return n.fullResponse?(i.photo_ids=n.photoId,i.full_response=1):i.photo_id=n.photoId,i.license_id=n.license,r.callAPI("flickr.photos.licenses.setLicense",i).then(function(e){if("errors"in e)return e.api="setLicense",e},function(e){throw n.fullResponse&&(e.photoIds=n.photoId,e.returnApi="setLicense"),e}).then(null,e.FetcherErrorLogger(t))}e.namespace("ModelUpdaters")["flickr-photos-licenses-setLicense"]={run:n}},"@VERSION@",{requires:["flickr-promise"]});
YUI.add("flickr-photos-setSafetyLevel-updater",function(e,t){"use strict";function n(n,r){var i={};return n.fullResponse?(i.photo_ids=n.photoId,i.full_response=1):i.photo_id=n.photoId,i.safety_level=n.safetyLevel+1,r.callAPI("flickr.photos.setSafetyLevel",i).then(function(e){if("errors"in e)return e.api="setSafety",e},function(e){throw n.fullResponse&&(e.photoIds=n.photoId,e.returnApi="setSafety"),e}).then(null,e.FetcherErrorLogger(t))}e.namespace("ModelUpdaters")["flickr-photos-setSafetyLevel"]={run:n}},"@VERSION@",{requires:["flickr-promise"]});
YUI.add("photo-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-photos-getInfo"].run(t,this.appContext)},update:function(t,n){var r=[];return("title"in n||"description"in n)&&r.push(e.ModelUpdaters["flickr-photos-setMeta"].run({photoId:t,title:n.title?n.title.newVal:this.getValue(t,"title"),description:n.description?n.description.newVal:this.getValue(t,"description")},this.appContext)),"license"in n&&r.push(e.ModelUpdaters["flickr-photos-licenses-setLicense"].run({photoId:t,license:n.license.newVal},this.appContext)),"safetyLevel"in n&&r.push(e.ModelUpdaters["flickr-photos-setSafetyLevel"].run({photoId:t,safetyLevel:n.safetyLevel.newVal},this.appContext)),e.Promise.all(r)},batchUpdate:function(t,n){var r=[];return"safetyLevel"in n&&r.push(e.ModelUpdaters["flickr-photos-setSafetyLevel"].run({photoId:t,safetyLevel:parseInt(n.safetyLevel,10),fullResponse:1},this.appContext)),"title"in n&&"description"in n?r.push(e.ModelUpdaters["flickr-photos-setMeta"].run({photoId:t,title:n.title,description:n.description,fullResponse:1},this.appContext)):"title"in n?r.push(e.ModelUpdaters["flickr-photos-setMeta"].run({photoId:t,title:n.title,fullResponse:1},this.appContext)):"description"in n&&r.push(e.ModelUpdaters["flickr-photos-setMeta"].run({photoId:t,description:n.description,fullResponse:1},this.appContext)),"license"in n&&r.push(e.ModelUpdaters["flickr-photos-licenses-setLicense"].run({photoId:t,license:n.license,fullResponse:1},this.appContext)),e.Promise.all(r)}},getLargestSize:e.PhotoModelHelper.getLargestSize,getSizeToFit:e.PhotoModelHelper.getSizeToFit,getSizeIfExact:e.PhotoModelHelper.getSizeIfExact,isSizeSquare:e.PhotoModelHelper.isSizeSquare,isPhotoSquare:e.PhotoModelHelper.isPhotoSquare,getGuestpass:function(t){var n=this;return new e.Promise(function(e,r){n.getValue(t,"guestpass")?e():n.appContext.callAPI("flickr.sharing.createGuestpass",{photo:t}).then(function(r){n.setValue(t,"guestpass",r.guestpass.url),e()})})},attributes:{title:e.PhotoModelHelper.attributes.title,description:e.PhotoModelHelper.attributes.description,mediaType:e.PhotoModelHelper.attributes.mediaType,license:e.PhotoModelHelper.attributes.license,isVideo:e.PhotoModelHelper.attributes.isVideo,isOwner:e.PhotoModelHelper.attributes.isOwner,sizes:e.PhotoModelHelper.attributes.sizes,descendingSizes:e.PhotoModelHelper.attributes.descendingSizes,ascendingSizes:e.PhotoModelHelper.attributes.ascendingSizes,aspectRatio:e.PhotoModelHelper.attributes.aspectRatio,needsInterstitial:e.PhotoModelHelper.attributes.needsInterstitial,canComment:e.PhotoModelHelper.attributes.canComment,canPublicComment:e.PhotoModelHelper.attributes.canPublicComment,url:e.PhotoModelHelper.attributes.url,rotation:e.PhotoModelHelper.attributes.rotation,owner:{isModel:!0},engagement:{isModel:!0},isHD:{},secret:{},canAddMeta:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!0},isMarketplacePrintable:{defaultFn:function(e){return!1}},isMarketplaceLicensable:e.PhotoModelHelper.attributes.isMarketplaceLicensable,marketplaceLicensingUrl:e.PhotoModelHelper.attributes.marketplaceLicensingUrl,oWidth:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},oHeight:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},safetyLevel:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},guestpass:{},hasInvalidColorspaceForPrint:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},sizesForAlbum:{readOnly:!0,derivedBy:["sizes"],defaultFn:function(t){var n=this.getValue(t,"sizes");return e.Object.each(n,function(e,t){e.src=e.url}),n}},curation:{isModel:!0},visibilitySource:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:1}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","photo-model-helper","photo-curation-models","flickr-photos-getInfo-fetcher","flickr-photos-setPerms-updater","flickr-photos-setMeta-updater","flickr-photos-licenses-setLicense-updater","flickr-photos-setSafetyLevel-updater","attribute-helpers"]});
YUI.add("flickr-photos-getInfo-fetcher",function(e,t){"use strict";function n(t){var n,r;return n=["sizes","icon_urls","ignored","rev_ignored","venue","datecreate"].join(","),n=n+","+e.APIHelper.request.getRebootPhotoExtras(),r={datecreate:1,extras:n,photo_id:t.id,get_contexts:1,primary_photo_extras:"url_sq, url_t, url_s, url_m"},t.userId?r.user_id=t.userId:t.pathAlias&&(r.path_alias=t.pathAlias),t.context&&(r.context=t.context,r.num_prev=1,r.num_next=1),t.scrappy&&(e.APIHelper.request.addStaticMapsParams(r),delete r.get_contexts,delete r.primary_photo_extras,delete r.context),r}function r(t,n,r){var s=t.apiResponse,o=t.photoRegistry,u=t.personRegistry,a=t.personRelationshipRegistry,f=t.photoEngagementRegistry,l=t.photoStatsRegistry,c=t.photoPrivacyRegistry,h=t.photoNotesRegistry,p=t.noteRegistry,d=t.photoGeoRegistry,v=t.photoLocationRegistry,m=t.photoHeadMetaRegistry,g=t.groupRegistry,y,b={},w,E,S,x,T,N,C=[],k,L,A;w={id:s.photo.id,title:s.photo.title.content,description:s.photo.description.content,sizes:e.APIHelper.response.parsePhotoSize(s.photo.sizes.size,!0),needsInterstitial:s.photo.needsInterstitial,canComment:s.photo.editability.cancomment,canPublicComment:s.photo.publiceditability.cancomment,canAddMeta:s.photo.editability.canaddmeta,safetyLevel:s.photo.safetyLevel,license:s.photo.license,mediaType:s.photo.media,secret:s.photo.secret,isHD:e.APIHelper.response.isHD(s.photo.sizes.size),rotation:s.photo.rotation,hasInvalidColorspaceForPrint:s.photo.hasInvalidColorspaceForPrint,isMarketplacePrintable:s.photo.isMarketplacePrintable,isMarketplaceLicensable:s.photo.isMarketplaceLicensable?s.photo.isMarketplaceLicensable:!1,marketplaceLicensingUrl:s.photo.marketplaceLicensingUrl?s.photo.marketplaceLicensingUrl:"",oWidth:s.photo.oWidth?parseInt(s.photo.oWidth,10):"",oHeight:s.photo.oHeight?parseInt(s.photo.oHeight,10):"",visibilitySource:s.photo.visibilitySource},E={id:s.photo.owner.nsid,username:s.photo.owner.username,realname:s.photo.owner.realname,pathAlias:s.photo.owner.pathAlias,buddyicon:e.APIHelper.response.agnosticizeFarmPathTransferProtocol(s.photo.owner.iconurls),isAdFree:s.photo.owner.isAdFree,isPro:s.photo.owner.ispro,dateCreated:s.photo.owner.datecreate,location:s.photo.owner.location},S={id:s.photo.owner.nsid,pathAlias:s.photo.owner.pathAlias,isContact:s.photo.contactIscontact,isFamily:s.photo.contactIsfamily,isFriend:s.photo.contactIsfriend,isIgnored:s.photo.owner.isignored,isIgnoredBy:s.photo.owner.revIgnored},x={id:s.photo.id,ownerNsid:s.photo.owner.nsid,isFaved:s.photo.isfavorite||!1,canShare:s.photo.usage.canshare,canDownload:s.photo.usage.candownload,commentCount:s.photo.comments.content,noteCount:s.photo.notes&&s.photo.notes.note&&s.photo.notes.note.length,faveCount:s.photo.countFaves,viewCount:s.photo.views},T={id:s.photo.id,dateTaken:s.photo.dates.taken,datePosted:s.photo.dates.posted,takenGranularity:s.photo.dates.takengranularity,isDateTakenUnknown:s.photo.datetakenunknown||s.photo.datetakenunknown==="1"||s.photo.datetakenunknown===1},k={id:s.photo.id,title:s.photo.HTMLMETA["og:title"],noindexfollow:s.photo.owner.noindexfollow,keywords:s.photo.HTMLMETA.keywords,"og:title":s.photo.HTMLMETA["og:title"],"og:description":s.photo.HTMLMETA["og:description"],"og:type":s.photo.HTMLMETA["og:type"],"og:url":s.photo.HTMLMETA["og:url"],"og:image":s.photo.HTMLMETA["og:image"],"og:image:width":s.photo.HTMLMETA["og:image:width"],"og:image:height":s.photo.HTMLMETA["og:image:height"],"flickr_photos:by":s.photo.HTMLMETA["flickr_photos:by"],"flickr_photos:camera":s.photo.HTMLMETA["flickr_photos:camera"],"flickr_photos:sets":s.photo.HTMLMETA["flickr_photos:sets"],"flickr_photos:groups":s.photo.HTMLMETA["flickr_photos:groups"],"flickr_photos:galleries":s.photo.HTMLMETA["flickr_photos:galleries"],"twitter:card":s.photo.HTMLMETA["twitter:card"],"twitter:description":s.photo.HTMLMETA["twitter:description"],"twitter:app:url:iphone":s.photo.HTMLMETA["twitter:app:url:iphone"],"twitter:creator":s.photo.HTMLMETA["twitter:creator"],pinterest:s.photo.HTMLMETA.pinterest},N={id:s.photo.id,isPublic:s.photo.visibility.ispublic,isVisibleByFriends:s.photo.visibility.isfriend,isVisibleByFamily:s.photo.visibility.isfamily,permAddMeta:s.photo.permissions?s.photo.permissions.permaddmeta:0,permComment:s.photo.permissions?s.photo.permissions.permcomment:0},s.photo&&s.photo.notes&&s.photo.notes.note&&e.Array(s.photo.notes.note).forEach(function(e){C.push(p.addOrUpdate({id:e.id,authorName:e.authorname,author:e.author,left:e.x,top:e.y,width:e.w,height:e.h,text:e.content}))}),L=e.ModelFetchers["flickr-photos-getLocation"].mapResponse(s,d),w.owner=u.addOrUpdate(E),w.engagement=f.addOrUpdate(x),a.addOrUpdate(S),A=o.addOrUpdate(w),s.photo.isMarketplacePrintable&&A.setValue("isMarketplacePrintable",!0),s.photo.isMarketplaceLicensable&&A.setValue("isMarketplaceLicensable",!0),l.addOrUpdate(T),c.addOrUpdate(N),h.addOrUpdate({id:w.id,notes:C}),m.addOrUpdate(k),v.addOrUpdate(L),s.photo.contexts&&(y=t.contextsRegistry,b.faves=t.favoriteRegistry,b.gallery=t.galleryRegistry,b.pool=t.groupsPoolRegistry,b.set=t.setRegistry,b.stream=t.photostreamRegistry,i({photoModel:A,contextRegistries:b,contextsResponse:s.photo.contexts,personRegistry:u,contextsRegistry:y,photoEngagementRegistry:f,photoStatsRegistry:l,groupRegistry:g,apiParams:r}))}function i(t){var n=t.photoModel,r=t.contextRegistries,i=t.contextsResponse,s=t.personRegistry,o=t.contextsRegistry,u=t.photoEngagementRegistry,a=t.photoStatsRegistry,f=t.photoCurationModelRegistry,l=t.groupRegistry,c=t.apiParams,h=[];e.Object.each(r,function(t,r){i[r]&&e.Array.each(i[r],function(r){e.APIHelper.response.addContextToRegistry(r,t,s,l),h.push(t.proxy(r.id)),c.context&&function(){var i,o,l,h,p,d,v,m,g;i=t.getValue(r.id,"photoContextList"),o=i.hasMinBoundary?i.hasMinBoundary():!1,l=i.hasMaxBoundary?i.hasMaxBoundary():!1,h=i.getList(),d=r.nextphotos,v=r.prevphotos,m=d?e.APIHelper.response.parsePhotos({photos:d.photo,personModelRegistry:s,photoModelRegistry:n.registry,photoEngagementModelRegistry
:u,photoStatsModelRegistry:a,photoCurationModelRegistry:f}):[],g=v?e.APIHelper.response.parsePhotos({photos:v.photo,personModelRegistry:s,photoModelRegistry:n.registry,photoEngagementModelRegistry:u,photoStatsModelRegistry:a,photoCurationModelRegistry:f}):[];if(g.length||m.length)p=e.APIHelper.response.addOrReplaceListByContext({model:n,next:m,prev:g.reverse(),current:h,hasMin:o,hasMax:l,numNext:c.num_next,numPrev:c.num_prev});t.setValue(r.id,"photoContextList",p)}()})}),o.exists(n.id)||(o.add({id:n.id,totalGroups:i.pool?i.pool.length:0,totalSets:i.set?i.set.length:0,totalGalleries:i.gallery?i.gallery.length:0}),o.setValue(n.id,"contexts",h))}function s(n,r){var i=this,s;return r.flipper.isFlipped("enable-scrappy-photo-page")&&(n.scrappy=!0),s=this._processParams(n),(new e.FlickrPromise({apiResponse:r.callAPI("flickr.photos.getInfo",s),photoRegistry:r.getModelRegistry("photo-models"),personRegistry:r.getModelRegistry("person-models"),personRelationshipRegistry:r.getModelRegistry("person-relationship-models"),photoEngagementRegistry:r.getModelRegistry("photo-engagement-models"),photoStatsRegistry:r.getModelRegistry("photo-stats-models"),photoCurationModelRegistry:r.getModelRegistry("photo-curation-models"),photoPrivacyRegistry:r.getModelRegistry("photo-privacy-models"),photoNotesRegistry:r.getModelRegistry("photo-notes-models"),noteRegistry:r.getModelRegistry("note-models"),photoGeoRegistry:r.getModelRegistry("photo-geo-models"),photoLocationRegistry:r.getModelRegistry("photo-location-models"),photoHeadMetaRegistry:r.getModelRegistry("photo-head-meta-models"),groupRegistry:r.getModelRegistry("group-models"),contextsRegistry:r.getModelRegistry("photo-contexts-models"),favoriteRegistry:r.getModelRegistry("favorite-models"),galleryRegistry:r.getModelRegistry("gallery-models"),groupsPoolRegistry:r.getModelRegistry("group-pool-models"),setRegistry:r.getModelRegistry("set-models"),photostreamRegistry:r.getModelRegistry("photostream-models")})).then(function(e){return i._processResponse(e,r.flipper,s)},e.FetcherErrorLogger(t))}e.namespace("ModelFetchers")["flickr-photos-getInfo"]={run:s,_processParams:n,_processResponse:r}},"@VERSION@",{requires:["flickr-promise","api-helper","flickr-photos-getLocation-fetcher"],optional:["photo-models","person-models","person-relationship-models","photo-engagement-models","photo-stats-models","photo-curation-models","photo-geo-models","photo-location-models","photo-head-meta-models","note-models","photo-notes-models","autotag-models","photo-autotags-models"]});
YUI.add("photo-geo-models",function(e){function r(e){r.superclass.constructor.call(this,e)}var t=1,n=16;e.Models[this.name]=r,e.extend(r,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-photos-getInfo"].run(t,this.appContext).then(function(e){return e},function(){})},update:function(t,n){var r={photo_id:t,lat:this.getValue(t,"latitude"),lon:this.getValue(t,"longitude")};n.hasOwnProperty("accuracy")&&(r.accuracy=this.getValue(t,"accuracy"));if(n.hasOwnProperty("isPublic")||n.hasOwnProperty("isContact")||n.hasOwnProperty("isFriend")||n.hasOwnProperty("isFamily"))r.is_public=Number(this.getValue(t,"isPublic")),r.is_contact=Number(this.getValue(t,"isContact")),r.is_friend=Number(this.getValue(t,"isFriend")),r.is_family=Number(this.getValue(t,"isFamily"));return e.ModelUpdaters["flickr-photos-geo-setLocation"].run(r,this.appContext)}},attributes:{hasGeo:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},latitude:{validator:function(t,n){return e.AttributeHelpers.validateFloat(t)},setter:function(t){return e.AttributeHelpers.coerceFloat(t)||undefined},defaultValue:undefined},longitude:{validator:function(t,n){return e.AttributeHelpers.validateFloat(t)},setter:function(t){return e.AttributeHelpers.coerceFloat(t)||undefined},defaultValue:undefined},accuracy:{validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(r){return e.AttributeHelpers.coerceInteger(Math.max(t,Math.min(r,n)))||undefined},defaultValue:t},isPublic:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isContact:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isFriend:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isFamily:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-photos-getInfo-fetcher","attribute-helpers","flickr-photos-geo-setLocation-updater"]});
YUI.add("zoom-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,forceGpu:null,initializer:function(t){return this.photoId=t.photoId,this.disableIfSmall=!!t.disableIfSmall,YUI.Env.isServer||(e.config.win.location.search.indexOf("gpu=on")>-1?this.forceGpu=!0:e.config.win.location.search.indexOf("gpu=off")>-1&&(this.forceGpu=!1)),this},loadState:function(){var e=this;return this.appContext.getModel("photo-models",e.photoId).then(function(t){e.set("photo",t)})},buildContainer:function(){var e=this.templates("zoom")({})||"";return this.setContainerHTML(e),this},activate:function(){var t=this,n=t.getZoomKeyScope();return this.get("photo").getValue("needsInterstitial")||(this.parentViewContainer=this.get("container").ancestor(".view"),t.registerEventHandler(t.get("container").on("click",function(n){n.preventDefault(),t.cursorCoords=[n.pageX-e.config.win.pageXOffset,n.pageY-e.config.win.pageYOffset],e.rapidTracker.beacon(t.name,"zoomInClick"),t.zoomIn(t.cursorCoords)})),t.attachKeyEvent("down:90",e.betterThrottle(function(n){n.preventDefault(),e.rapidTracker.beacon(t.name,"zoomInKeyPress"),t.zoomIn()},100)),t.attachKeyEvent("down:90,27",e.betterThrottle(function(n){n.preventDefault(),e.rapidTracker.beacon(t.name,"zoomOutKeyPress"),t.zoomOut()},100),n),t.attachKeyEvent("down:37,38,39,40",e.betterThrottle(function(n){var r=[t.currentZoomRegion.left,t.currentZoomRegion.top],i=200;n.preventDefault();switch(n.button){case 37:r[0]+=i;break;case 38:r[1]+=i;break;case 39:r[0]-=i;break;case 40:r[1]-=i}e.rapidTracker.beacon(t.name,"zoomPanKeyPress"),t.panZoomNode(r)},16),n),t.registerEventHandler(t.appContext.flapp.before("activeViewChange",function(e){t.cleanUp()}))),this},getZoomEdgeMargin:function(){return 100},panZoomNodeToCurrentCoords:function(){if(!this.zoomedIn)return;var e=this.cursorCoords,t=this.getZoomPanCoordsForCursor(e);if(!t)return;this.panZoomNode(t)},panZoomNode:function(e){if(this.currentZoomRegion.left===e[0]&&this.currentZoomRegion.top===e[1])return;e=this.constrainPanCoords(e),this.currentZoomRegion.left=e[0],this.currentZoomRegion.top=e[1],this.pendingCoords=e},constrainPanCoords:function(e){var t,n,r,i,s=this.getZoomEdgeMargin(),o=[this.appContext.viewportData.getWidth(),this.appContext.viewportData.getHeight()],u=[this.zoomImageFullWidth,this.zoomImageFullHeight],a=[u[0]+2*s,u[1]+2*s];return t=0,n=o[0]-u[0]-2*s,r=0,i=o[1]-u[1]-2*s,e[0]>t?e[0]=t:e[0]<n&&(e[0]=n),e[1]>r?e[1]=r:e[1]<i&&(e[1]=i),u[0]<o[0]&&(e[0]=.5*(o[0]-a[0])),u[1]<o[1]&&(e[1]=.5*(o[1]-a[1])),e},getZoomPanCoordsForCursor:function(e){if(!e)return;var t=this.getZoomEdgeMargin(),n=[this.appContext.viewportData.getWidth(),this.appContext.viewportData.getHeight()],r=[this.zoomImageFullWidth,this.zoomImageFullHeight],i=[r[0]+2*t,r[1]+2*t],s=[e[0]/n[0],e[1]/n[1]],o=[s[0]*(n[0]-i[0]),s[1]*(n[1]-i[1])];return o},getZoomSmallRegion:function(){var t=this.get("container");return{left:t.getX()-e.config.win.pageXOffset-this.getZoomEdgeMargin(),top:t.getY()-e.config.win.pageYOffset-this.getZoomEdgeMargin(),width:parseInt(t.getStyle("width"),10),height:parseInt(t.getStyle("height"),10)}},resizeZoomNode:function(t,n){var r=this,i,s,o=e.config.win.performance&&e.config.win.performance.now;return n?new e.Promise(function(n,u){function a(e){var u=o?e-i:Date.now()-i,a=u/r.getZoomTransitionTime(),f;return a>=1?(f=t,r.isAnimatingZoom=!1,setTimeout(function(){n()},r.getZoomTransitionTime())):f={left:s.left+(t.left-s.left)*a,top:s.top+(t.top-s.top)*a,width:s.width+(t.width-s.width)*a,height:s.height+(t.height-s.height)*a},f}function f(n){var i=a(n);if(r.zoomingIn||r.zoomingOut)r.resizeZoomNode(i,!1),i!==t&&e.config.win.requestAnimationFrame(f)}r.isAnimatingZoom=!0,i=o?e.config.win.performance.now():Date.now(),s=r.currentZoomRegion,e.config.win.requestAnimationFrame(f)}):(this.currentZoomRegion=t,this.zoomPhotoContainerNode&&this.zoomPhotoContainerNode.setStyle("transform","translate("+t.left+"px, "+t.top+"px) scale("+t.width/this.zoomImageFullWidth+")"),e.Promise.resolve())},getZoomTransitionTime:function(){return 200},zoomOut:function(){var t=this,n=this.zoomNode;e.fire("flickr:removeKeyEventScope",this.getZoomKeyScope()),n.detachAll("mousemove"),this.mouseWheelHandler&&this.mouseWheelHandler.detach(),this.touchHandlers&&(this.touchHandlers.forEach(function(e){e.detach()}),delete this.touchHandlers),this.resizeZoomNode(this.getZoomSmallRegion(),!0),n.addClass("hiding"),this.zoomedIn=!1,this.zoomingIn=!1,this.zoomingOut=!0,setTimeout(function(){t.zoomingOut&&n&&n._node&&(t.parentViewContainer.removeClass("zoomed"),n.removeClass("hiding"),n.addClass("hidden"),setTimeout(function(){t.zoomingOut&&(t.cleanUp(),this.zoomingOut=!1)},200))},this.getZoomTransitionTime()+0),delete this.pendingCoords,delete this.currentCoords},cleanUp:function(){this.zoomNode&&(this.zoomNode.remove(!0),delete this.zoomNode,delete this.zoomPhotoContainerNode,this.zoomAnimationHandle.detach())},isImageReadyToDisplay:function(e){var t;return e?(t=new Image,t.src=e,t.complete||t.naturalWidth):!1},getZoomKeyScope:function(){return this.name+this._yuid},zoomMouseMoveHandler:function(t){this.cursorCoords=[t.pageX-e.config.win.pageXOffset,t.pageY-e.config.win.pageYOffset],this.isAnimatingZoom||this.panZoomNodeToCurrentCoords()},zoomScrollWheelHandler:function(e){e.preventDefault();var t=e.wheelDeltaX,n=e.wheelDeltaY;t===undefined&&(t=-e.deltaX||0),n===undefined&&(n=-e.deltaY||0),this.panZoomNode([this.currentZoomRegion.left+t,this.currentZoomRegion.top+n])},getSizes:function(){var e=this.parentViewContainer.one(".low-res-photo"),t=this.parentViewContainer.one(".main-photo");return{small:e?e.getAttribute("src"):"",medium:t?t.getAttribute("src"):"",large:this.getLargestSize()}},getLargestSize:function(){var e=this.appContext.flipper.isFlipped("enable-zoom-proxy"),t=this.appContext.flipper.config["zoom-proxy-prefix"],n;return e&&t?(n=this.get("photo").getLargestSize({excludeSizes:[]}),n.key==="o"&&(console.log("proxyPrefix",t,"largestSize.displayUrl"
,n.displayUrl),n.displayUrl=n.url=t+"http:"+n.displayUrl,console.log("proxying original",n.url))):n=this.get("photo").getLargestSize(),n},zoomIn:function(t){var n=this,r,i,s=this.getSizes(),o=this.isImageReadyToDisplay(s.medium),u=this.isImageReadyToDisplay(s.large.url),a=this.getZoomPixelRatio(),f=this.getZoomSmallRegion(),l,c,h,p=this.maxMsgNode;if(this.disableIfSmall&&f.width>=s.large.width){p||(p=this.maxMsgNode=e.Node.create('<div class="zoom-max-message">'+n.intlMessage({intlName:"photo-page-scrappy.ZOOM_MAX_MESSAGE"})+"</div>")),this.get("container").contains(p)||(p.addClass("hidden"),this.get("container").append(p)),setTimeout(function(){p&&p.inDoc()&&(p.removeClass("hidden"),this.maxMsgNodeHidingTimer&&(clearTimeout(this.maxMsgNodeHidingTimer),delete this.maxMsgNodeHidingTimer),this.maxMsgNodeHidingTimer=setTimeout(function(){p&&p.inDoc()&&p.addClass("hidden")},3e3))},0);return}e.fire("flickr:setKeyEventScope",this.getZoomKeyScope()),this.zoomingIn=!0,this.zoomAnimationHandle=e.AnimationManager.subscribe(function(){var r=n.getDeteriorationRateForEasing(),i,s,o={x:0,y:0},u={x:0,y:0},a={x:0,y:0};if(n.pendingCoords){o.x=parseInt(n.pendingCoords[0],10),o.y=parseInt(n.pendingCoords[1],10),n.currentCoords?(u.x=n.currentCoords[0],u.y=n.currentCoords[1]):(i=n.getZoomPanCoordsForCursor(t),s=n.constrainPanCoords(i),u.x=parseInt(s[0],10),u.y=parseInt(s[1],10)),o.x<u.x?a.x=u.x-Math.abs(o.x-u.x)*r:a.x=u.x+Math.abs(o.x-u.x)*r,o.y<u.y?a.y=u.y-Math.abs(o.y-u.y)*r:a.y=u.y+Math.abs(o.y-u.y)*r,a.x=parseInt(a.x,10),a.y=parseInt(a.y,10),a.x===u.x&&(o.x<u.x?a.x=u.x-1:o.x>u.x&&(a.x=u.x+1)),a.y===u.y&&(o.y<u.y?a.y=u.y-1:o.y>u.y&&(a.y=u.y+1));if(a.x!==o.x||a.y!==o.y)(n.forceGpu===!0||e.config.win.devicePixelRatio>1)&&n.forceGpu!==!1?n.zoomPhotoContainerNode.setStyle("transform","translate3d("+a.x+"px, "+a.y+"px, 0)"):n.zoomPhotoContainerNode.setStyle("transform","translate("+a.x+"px, "+a.y+"px)");n.currentCoords=[a.x,a.y],a.x===o.x&&a.y===o.y&&delete n.pendingCoords}}),this.zoomNode?(this.zoomingOut=!1,r=this.zoomNode,r.removeClass("hiding"),r.detachAll("mousemove"),this.mouseWheelHandler&&this.mouseWheelHandler.detach(),this.touchHandlers&&(this.touchHandlers.forEach(function(e){e.detach()}),delete this.touchHandlers)):r=this.zoomNode=e.Node.create(this.templates("zoom-modal")({smallSrc:o?s.medium:s.small,largeSrc:u?s.large.url:""})),i=this.zoomPhotoContainerNode=r.one(".zoom-photo-container"),this.zoomImageFullWidth=s.large.width/a,this.zoomImageFullHeight=s.large.height/a,t||(t=[this.appContext.viewportData.viewport.width/2,this.appContext.viewportData.viewport.height/2],n.cursorCoords=t),l=this.getZoomPanCoordsForCursor(t),l=this.constrainPanCoords(l),c={left:l[0],top:l[1],width:this.zoomImageFullWidth,height:this.zoomImageFullHeight},i.setStyle("transition","none"),this.resizeZoomNode(f,!1),r.on("click",function(t){if(n.zoomingIn)return;t.preventDefault(),e.rapidTracker.beacon(n.name,"zoomOutClick"),n.zoomOut()}),e.one("body").append(r),i.setStyle("width",c.width),i.setStyle("height",c.height),e.soon(function(){n.zoomingIn&&(r.removeClass("hidden"),i.setStyle("transition",""),"ontouchstart"in document?e.use("event-touch",function(){n.touchHandlers=[],n.touchHandlers.push(e.on("touchstart",function(e){e.changedTouches.length&&e.changedTouches.length===1&&(n.touching=[e.changedTouches[0].pageX,e.changedTouches[0].pageY])})),n.touchHandlers.push(e.on("touchmove",function(e){var t=e.pageX,r=e.pageY,i,s;n.touching&&e.changedTouches.length&&e.changedTouches.length===1&&(t=e.changedTouches[0].pageX,r=e.changedTouches[0].pageY,e.preventDefault(),i=t-n.touching[0],s=r-n.touching[1],n.touching=[t,r],n.panZoomNode([n.currentZoomRegion.left+i,n.currentZoomRegion.top+s]))})),n.touchHandlers.push(e.on("touchend",function(e){delete n.touching}))}):(r.on("mousemove",n.zoomMouseMoveHandler.bind(n)),n.mouseWheelHandler=function(){var e=n.zoomScrollWheelHandler.bind(n);return h="onwheel"in document.createElement("div")?"wheel":"mousewheel",document.addEventListener(h,e,!1),{detach:function(){document.removeEventListener(h,e,!1)}}}()),n.parentViewContainer.addClass("zoomed"),n.resizeZoomNode(c,!0).then(function(){n.zoomingIn&&(n.zoomingIn=!1,n.zoomedIn=!0,n.panZoomNodeToCurrentCoords(),u||i.append('<img src="'+s.large.url+'" class="zoom-large">'))}))})},getDeteriorationRateForEasing:function(){return.2},getZoomPixelRatio:function(){return 1}})},"@VERSION@",{requires:["flickr-view","better-throttle","flickr-promise","zoom-css","hermes-template-zoom","hermes-template-zoom-modal","animation-manager"],optional:["photo-models"],langBundles:["photo-page-scrappy"]});
YUI.add("hermes-lang-photo-page-scrappy_zh-hant-hk",function(e,t){e.Intl.add("hermes/photo-page-scrappy","zh-Hant-HK",{PAGE_TITLE:["${title}"," | Flickr - \u76f8\u7247\u5206\u4eab\uff01"],BACK_TO:["\u8fd4\u56de ","${entryType}"],COULDNT_UPDATE_SETTINGS:["\u6211\u5011\u7121\u6cd5\u66f4\u65b0\u4f60\u7684\u8a2d\u5b9a\u3002"],ADULT_CONTENT:["\u6210\u4eba\u5167\u5bb9"],MATURE_AUDIENCES:["\u53ea\u6709\u6210\u4eba\u624d\u80fd\u6aa2\u8996\u6b64\u5167\u5bb9\u3002"],USER_DISCRETION:["\u5efa\u8b70\u4f7f\u7528\u8005\u81ea\u884c\u659f\u914c\u3002"],SHOW_ME_THIS_CONTENT_TYPE:["\u5f9e\u73fe\u5728\u958b\u59cb\u70ba\u6211\u986f\u793a\u6b64\u5167\u5bb9\u985e\u578b"],CHANGE_SAFE_SEARCH_IN_SETTINGS:['\u4f60\u96a8\u6642\u90fd\u53ef\u4ee5\u5728\u5e33\u865f\u504f\u597d\u8a2d\u5b9a\u4e2d\u8b8a\u66f4<a href="/account/prefs/safesearch/?from=privacy"  data-track="photoWellSafeSearchClick">\u5b89\u5168\u641c\u5c0b\u8a2d\u5b9a</a>\u3002'],SIGNED_IN_FOR_CONTENT:["\u82e5\u8981\u67e5\u770b\u6b64\u5167\u5bb9\uff0c\u4f60\u5fc5\u9808\u767b\u5165\u3002"],VIDEO_COMING_SOON:["\u5373\u5c07\u63a8\u51fa\u8996\u8a0a\u652f\u63f4"],FIND_OUT_MORE_AD:["\u5728 ","${brand}"," \u4e2d\u9032\u4e00\u6b65\u77ad\u89e3"],SHARE_THIS_PHOTO:["\u5206\u4eab\u9019\u5f35\u76f8\u7247"],DOWNLOAD_THIS_VIDEO:["\u4e0b\u8f09\u6b64\u8996\u8a0a"],DOWNLOAD_THIS_PHOTO:["\u4e0b\u8f09\u6b64\u76f8\u7247"],VIEW_ALL_SIZES:["\u6aa2\u8996\u5168\u90e8\u5c3a\u5bf8"],DOWNLOAD_PHOTO:["\u4e0b\u8f09\u76f8\u7247"],SOME_RIGHTS_RESERVED:["\u4fdd\u7559\u90e8\u5206\u6b0a\u5229"],DOWNLOAD:["\u4e0b\u8f09"],ERROR_LOADING_CONTEXT:["\u8f09\u5165\u5167\u5bb9\u6642\u767c\u751f\u932f\u8aa4"],ADD_TITLE:["\u65b0\u589e\u6a19\u984c"],ADD_DESCRIPTION:["\u65b0\u589e\u63cf\u8ff0"],TITLE_DESCRIPTION_FAILURE:["\u76ee\u524d\u7121\u6cd5\u8b8a\u66f4\u6a19\u984c\u548c\u63cf\u8ff0\u3002"],VIEW_PREVIOUS_COMMENT:["\u6aa2\u8996\u4e4b\u524d\u7684\u7559\u8a00"],VIEW_MORE_PREVIOUS_COMMENTS:["\u6aa2\u8996\u4e4b\u524d\u7684 ","${count}"," \u5247\u7559\u8a00"],EMPTY_COMMENT_ERROR:["\u7559\u8a00\u65b9\u584a\u7a7a\u767d\u55ce\uff1f \u9019\u662f\u884c\u4e0d\u901a\u7684\uff01"],COMMENT_RATE_LIMIT_ERROR:["\u670b\u53cb\uff0c\u4e14\u6162\uff01 \u70ba\u4e86\u9632\u6b62\u5783\u573e\u7559\u8a00\u548c\u767c\u4f48\u5783\u573e\u7559\u8a00\u7684\u884c\u70ba\u767c\u751f\u5728 Flickr \u793e\u7fa4\u4e2d\uff0c\u6211\u5011\u6703\u91dd\u5c0d\u7559\u8a00\u8a2d\u7acb\u4e00\u4e9b\u9650\u5236\u3002"],COMMENT_POST_ERROR:["\u6211\u5011\u7121\u6cd5\u767c\u4f48\u4f60\u7684\u7559\u8a00\u3002"],MORE_COMMENTS_ERROR:["\u6211\u5011\u7121\u6cd5\u53d6\u5f97\u66f4\u591a\u7559\u8a00\u3002"],COMMENT_PERMALINK_ERROR:["\u6211\u5011\u627e\u4e0d\u5230\u8207\u76f8\u7247\u76f8\u95dc\u7684\u6307\u5b9a\u7559\u8a00\u3002"],DELETE_COMMENT:["\u522a\u9664\u7559\u8a00"],COMMENT_DELETE_CONFIRMATION:["\u4f60\u78ba\u5b9a\u8981\u522a\u9664\u6b64\u7559\u8a00\u55ce\uff1f"],COMMENT_DELETE_ERROR:["\u6211\u5011\u7121\u6cd5\u522a\u9664\u4f60\u7684\u7559\u8a00\u3002"],COMMENT_LOADING_ERROR:["\u8f09\u5165\u7559\u8a00\u6642\u767c\u751f\u932f\u8aa4"],COMMENT:["\u7559\u8a00"],SHOW_MORE_COMMENTS:["\u9084\u6709 ","${count}"," \u5247"],REPLY:["\u56de\u8986"],PERMALINK:["\u6c38\u4e45\u9023\u7d50"],SINGLE_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAlias}",'/">',"${displayName}","</a> \u5c07\u6b64\u52a0\u5165\u6700\u611b"],DOUBLE_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAliasOne}",'/">',"${displayNameOne}",'</a> \u548c <a class="faved-by-person-link" href="/photos/',"${pathAliasTwo}",'/">',"${displayNameTwo}","</a> \u5c07\u6b64\u52a0\u5165\u6700\u611b"],TRIPLE_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAliasOne}",'/">',"${displayNameOne}",'</a>\u3001<a class="faved-by-person-link" href="/photos/',"${pathAliasTwo}",'/">',"${displayNameTwo}",'</a> \u548c <a class="faved-by-person-link" href="/photos/',"${pathAliasThree}",'/">',"${displayNameThree}","</a> \u5c07\u6b64\u52a0\u5165\u6700\u611b"],MULTI_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAliasOne}",'/">',"${displayNameOne}",'</a>\u3001<a class="faved-by-person-link" href="/photos/',"${pathAliasTwo}",'/">',"${displayNameTwo}",'</a> \u548c\u5176\u4ed6 <a class="remaining-faved-by" href="#">',"${count}"," \u4eba</a>\u5c07\u6b64\u52a0\u5165\u6700\u611b"],RELATIONSHIP_FRIEND_ERROR:["\u8a2d\u5b9a\u670b\u53cb\u95dc\u4fc2\u6642\u767c\u751f\u554f\u984c\u3002"],RELATIONSHIP_FAMILY_ERROR:["\u8a2d\u5b9a\u5bb6\u4eba\u95dc\u4fc2\u6642\u767c\u751f\u554f\u984c\u3002"],HIDE_EXIF:["\u96b1\u85cf EXIF"],SHOW_EXIF:["\u986f\u793a EXIF"],EDIT_LOCATION:["\u7de8\u8f2f\u4f4d\u7f6e"],EDIT_LOCATION_ORGANIZR:["\u6211\u5011\u6b63\u5728\u52aa\u529b\u91cd\u65b0\u8a2d\u8a08\u5168\u65b0\u7684\u76f8\u7247\u9ad4\u9a57\u3002 \u5f9e\u73fe\u5728\u958b\u59cb\uff0c\u4f60\u53ef\u4ee5\u5728 Organizr \u4e2d\u7de8\u8f2f\u4f4d\u7f6e\u3002"],SAVE_LOCATION:["\u5132\u5b58\u4f4d\u7f6e"],APERTURE:["\u5149\u5708"],FOCAL_LENGTH:["\u7126\u8ddd"],EXPOSURE_TIME:["\u66dd\u5149\u6642\u9593"],FLASH_AUTO_FIRED:["\u9583\u5149\u71c8 (\u81ea\u52d5\uff0c\u9583\u5149)"],FLASH_AUTO_NO_FIRE:["\u9583\u5149\u71c8 (\u81ea\u52d5\uff0c\u4e0d\u9583\u5149)"],FLASH_ON_FIRED:["\u9583\u5149\u71c8 (\u958b\u555f\uff0c\u9583\u5149)"],FLASH_ON_NO_FIRE:["\u9583\u5149\u71c8 (\u958b\u555f\uff0c\u4e0d\u9583\u5149)"],FLASH_OFF:["\u9583\u5149\u71c8 (\u95dc\u9589\uff0c\u4e0d\u9583\u5149)"],FLASH_SIMPLE_ON:["\u958b\u555f"],FLASH_SIMPLE_OFF:["\u95dc\u9589"],POWERED_BY:["POWERED BY"],FOURSQUARE:["FOURSQUARE"],ADD_PHOTO_TO_MAP:["\u5c07\u76f8\u7247\u65b0\u589e\u81f3\u4f60\u7684\u5730\u5716"],SINGULAR_FAVE:["\u6700\u611b"],PLURAL_FAVE:["\u4eba\u52a0\u5165\u6700\u611b"],SINGULAR_VIEW:["\u6aa2\u8996"],PLURAL_VIEW:["\u6b21\u6aa2\u8996"],SINGULAR_COMMENT:["\u7559\u8a00"],PLURAL_COMMENT:["\u5247\u7559\u8a00"],LICENSE_ERROR:["\u8b8a\u66f4\u76f8\u7247\u6388\u6b0a\u6642\u767c\u751f\u554f\u984c"],ALL_RIGHTS_RESERVED:["\u7248\u6b0a\u6240\u6709 \u4e0d\u5f97\u8f49\u8f09"],NO_RESTRICTIONS:["\u7121\u5df2\u77e5\u7248\u6b0a\u9650\u5236"],PUBLIC_DOMAIN:["\u516c\u5171\u7db2\u57df"
],USA_GOV_WORK:["\u7f8e\u570b\u653f\u5e9c\u4f5c\u54c1"],SAFETY_CHANGE_ERROR:["\u8b8a\u66f4\u76f8\u7247\u5b89\u5168\u5c64\u7d1a\u6642\u767c\u751f\u932f\u8aa4"],PRIVACY_CHANGE_ERROR:["\u8b8a\u66f4\u76f8\u7247\u96b1\u79c1\u6b0a\u6642\u767c\u751f\u554f\u984c"],COMMENT_PERM_CHANGE_ERROR:["\u8b8a\u66f4\u76f8\u7247\u7559\u8a00\u6b0a\u9650\u6642\u767c\u751f\u932f\u8aa4"],FLAG_PHOTO:["\u6aa2\u8209\u76f8\u7247"],MARK_FOR_REVIEW:["\u6aa2\u8209\u4ee5\u9032\u884c\u5be9\u95b1"],ADDITIONAL_INFO:["\u9644\u52a0\u8cc7\u8a0a"],VIEWING_THIS_PHOTO:["\u76f8\u7247\u6aa2\u8996\u6b0a\u9650"],PRIVACY_UPDATE_ERROR:["\u66f4\u65b0\u96b1\u79c1\u6b0a\u6642\u767c\u751f\u932f\u8aa4\u3002 \u8acb\u518d\u8a66\u4e00\u6b21\u3002"],META_PERMS_UPDATE_ERROR:["\u66f4\u65b0 add meta \u6b0a\u9650\u6642\u767c\u751f\u932f\u8aa4\u3002 \u8acb\u518d\u8a66\u4e00\u6b21\u3002"],ADD_META_TO_THIS_PHOTO:["\u65b0\u589e\u6a19\u7c64\u53ca\u4eba\u7269\u5230\u6b64\u76f8\u7247"],COMMENT_PERMS_UPDATE_ERROR:["\u66f4\u65b0\u7559\u8a00\u6b0a\u9650\u6642\u767c\u751f\u932f\u8aa4\u3002 \u8acb\u518d\u8a66\u4e00\u6b21\u3002"],COMMENTING_ON_THIS_PHOTO:["\u6b63\u5728\u6b64\u76f8\u7247\u7559\u8a00"],SAFETY_UPDATE_ERROR:["\u66f4\u65b0\u5b89\u5168\u5c64\u7d1a\u6642\u767c\u751f\u932f\u8aa4\u3002 \u8acb\u518d\u8a66\u4e00\u6b21\u3002"],SAFETY_LEVEL_OF_PHOTO:["\u6b64\u76f8\u7247\u7684\u5b89\u5168\u5c64\u7d1a"],FLAG_ERROR:["\u5617\u8a66\u6a19\u8a18\u6b64\u76f8\u7247\u6642\u767c\u751f\u932f\u8aa4\u3002 \u8acb\u518d\u8a66\u4e00\u6b21\u3002"],PROVIDE_FEEDBACK:["\u63d0\u4f9b\u5c0d\u65b0\u76f8\u7247\u9801\u9762\u7684\u610f\u898b"],ERROR_DELETING_AUTOTAG:["\u522a\u9664\u81ea\u52d5\u6a19\u7c64\u6642\u767c\u751f\u932f\u8aa4"],AUTOTAGS:["\u81ea\u52d5\u6a19\u7c64"],CONTACT_LIST_ERROR:["\u5617\u8a66\u53d6\u5f97\u4f60\u7684\u81ea\u5df1\u4eba\u6e05\u55ae\u6642\u767c\u751f\u932f\u8aa4\u3002 \u8acb\u518d\u8a66\u4e00\u6b21\u3002"],FAILED_TO_REMOVE_PERSON:["\u76ee\u524d\u7121\u6cd5\u5f9e\u76f8\u7247\u79fb\u9664\u8a72\u4eba\u7269\u3002"],PERSON_CANNOT_BE_TAGGED:["\u7121\u6cd5\u6a19\u793a\u6b64\u4eba\u3002"],PEOPLE_IN_PHOTO:["\u76f8\u4e2d\u4eba"],ADD_PEOPLE:["\u65b0\u589e\u4eba\u7269"],ADD_PERSON:["\u65b0\u589e\u4eba\u7269"],ERROR_REMOVING_FROM_GROUP:["\u5f9e\u7fa4\u7d44\u79fb\u9664\u6b64\u76f8\u7247\u6642\u767c\u751f\u554f\u984c"],ERROR_ACCEPTING_INVITATION:["\u63a5\u53d7\u7fa4\u7d44\u9080\u8acb\u6642\u767c\u751f\u554f\u984c"],SEARCH_GROUPS:["\u641c\u5c0b\u7fa4\u7d44"],PHOTO_NOT_IN_GROUPS:["\u6b64\u76f8\u7247\u4e26\u672a\u4f4d\u65bc\u4efb\u4f55\u7fa4\u7d44"],ADD_TO_GROUP:["\u65b0\u589e\u81f3\u7fa4\u7d44"],INVITE_TO_GROUP:["\u9080\u8acb\u81f3\u7fa4\u7d44"],ONE_GROUP_INVITATION:["\u4f60\u6709 1 \u500b\u7fa4\u7d44\u9080\u8acb"],N_GROUP_INVITATIONS:["\u4f60\u6709 ","${count}"," \u500b\u7fa4\u7d44\u9080\u8acb"],VIEW_MORE_GROUPS:["\u6aa2\u8996\u66f4\u591a\u7fa4\u7d44"],ERROR_REMOVING_FROM_ALBUM:["\u5f9e\u76f8\u7c3f\u79fb\u9664\u6b64\u76f8\u7247\u6642\u767c\u751f\u554f\u984c"],WARNING_REMOVE_LAST_PHOTO_FROM_ALBUM:["\u4f60\u5373\u5c07\u5f9e\u76f8\u7c3f\u79fb\u9664\u6700\u5f8c\u4e00\u5f35\u76f8\u7247\uff0c\u9019\u4e5f\u6703\u522a\u9664\u8a72\u76f8\u7c3f\u3002"],REMOVE_PHOTO_AND_ALBUM:["\u79fb\u9664\u76f8\u7247\u4e26\u522a\u9664\u76f8\u7c3f"],ADD_PHOTO_TO_ALBUM:["\u5c07\u6b64\u76f8\u7247\u65b0\u589e\u81f3\u76f8\u7c3f"],SEARCH_ALBUMS:["\u641c\u5c0b\u76f8\u7c3f"],ADD_TO_ALBUM:["\u65b0\u589e\u81f3\u76f8\u7c3f"],PHOTO_NOT_IN_ALBUMS:["\u6b64\u76f8\u7247\u4e26\u672a\u4f4d\u65bc\u4efb\u4f55\u76f8\u7c3f"],VIEW_MORE_ALBUMS:["\u6aa2\u8996\u66f4\u591a\u76f8\u7c3f"],PHOTO_IN_ONE_ALBUM:["\u6b64\u76f8\u7247\u4f4d\u65bc 1 \u672c\u76f8\u7c3f\u5167"],PHOTO_IN_N_ALBUMS:["\u6b64\u76f8\u7247\u4f4d\u65bc ","${count}"," \u672c\u76f8\u7c3f\u5167"],INVITE_PENDING:["\u9080\u8acb\u8655\u7406\u4e2d"],CANCEL_INVITE:["\u53d6\u6d88\u9080\u8acb"],ACCEPT_INVITE:["\u63a5\u53d7\u9080\u8acb"],ONE_ITEM:["1 \u500b\u9805\u76ee"],N_ITEMS:["${count}"," \u500b\u9805\u76ee"],ERROR_REMOVING_FROM_GALLERY:["\u5f9e\u535a\u89bd\u9928\u79fb\u9664\u6b64\u76f8\u7247\u6642\u767c\u751f\u554f\u984c"],SEARCH_GALLERIES:["\u641c\u5c0b\u535a\u89bd\u9928"],ADD_TO_GALLERY:["\u65b0\u589e\u81f3\u535a\u89bd\u9928"],PHOTO_NOT_IN_GALLERIES:["\u6b64\u76f8\u7247\u4e26\u672a\u4f4d\u65bc\u4efb\u4f55\u535a\u89bd\u9928"],VIEW_MORE_GALLERIES:["\u6aa2\u8996\u66f4\u591a\u535a\u89bd\u9928"],PHOTO_IN_ONE_GALLERY:["\u6b64\u76f8\u7247\u4f4d\u65bc 1 \u500b\u535a\u89bd\u9928\u5167"],PHOTO_IN_N_GALLERIES:["\u6b64\u76f8\u7247\u4f4d\u65bc ","${count}"," \u500b\u535a\u89bd\u9928\u5167"],DELETE_PHOTO:["\u522a\u9664\u76f8\u7247"],PERMANTENTLY_DELETE:["\u4f60\u78ba\u5b9a\u8981\u6c38\u4e45\u522a\u9664\u6b64\u76f8\u7247\u55ce\uff1f"],EDIT_PHOTO:["\u7de8\u8f2f\u76f8\u7247"],NO_VIDEOS_IN_AVIARY:["\u7121\u6cd5\u5728 Aviary \u4e2d\u7de8\u8f2f\u8996\u8a0a"],ENHANCE_WITH_AVIARY:["\u900f\u904e Aviary \u52a0\u5f37\u6548\u679c"],NO_VIDEO_ROTATION:["\u7121\u6cd5\u65cb\u8f49\u8996\u8a0a"],ROTATE:["\u65cb\u8f49"],NO_VIDEO_REPLACE:["\u7121\u6cd5\u53d6\u4ee3\u8996\u8a0a"],REPLACE:["\u53d6\u4ee3"],PHOTO_NAVIGATION:["\u76f8\u7247\u700f\u89bd"],THUMBNAIL_NAVIGATION:["\u7e2e\u5716\u700f\u89bd"],ZOOM:["\u7e2e\u653e"],VIEW_IN_LIGHTBOX:["\u5728\u71c8\u7bb1\u4e2d\u6aa2\u8996"],BACK_TO_CONTEXT:["\u8fd4\u56de\u5167\u5bb9"],ADD_TAG:["\u65b0\u589e\u6a19\u7c64"],GO_TO_ORGANIZER:["\u79fb\u81f3 Organizr"],ALBUM:["\u76f8\u7c3f"],ALBUMS:["\u76f8\u7c3f"],ERROR_LOADING_ALBUMS:["\u8f09\u5165\u4f60\u7684\u76f8\u7c3f\u6642\u767c\u751f\u554f\u984c"],ERROR_ADDING_PHOTO_TO_ALBUM:["\u5c07\u6b64\u76f8\u7247\u65b0\u589e\u81f3\u76f8\u7c3f\u6642\u767c\u751f\u554f\u984c"],ERROR_REMOVING_PHOTO_FROM_ALBUM:["\u5f9e\u76f8\u7c3f\u79fb\u9664\u6b64\u76f8\u7247\u6642\u767c\u751f\u554f\u984c"],ERROR_LOADING_GROUPS:["\u8f09\u5165\u4f60\u53ef\u4ee5\u65b0\u589e\u76f8\u7247\u7684\u7fa4\u7d44\u6642\u767c\u751f\u554f\u984c"],ERROR_ADDING_TO_GROUP:["\u5c07\u6b64\u76f8\u7247\u65b0\u589e\u81f3\u7fa4\u7d44\u6642\u767c\u751f\u554f\u984c"],ERROR_ADDING_TO_GROUP_NOT_OWNER:["\u62b1\u6b49\uff0c\u7531\u65bc\u4f60\u4e26\u975e\u76f8\u7247\u64c1\u6709\u8005\uff0c\u56e0\u6b64\u7121\u6cd5\u5c07\u76f8\u7247\u65b0\u589e\u81f3\u7fa4\u7d44\u3002"
],ERROR_ADDING_TO_GROUP_NOT_MEMBER:["\u62b1\u6b49\uff0c\u7121\u6cd5\u5c07\u76f8\u7247\u65b0\u589e\u81f3\u7fa4\u7d44\u3002 \u4f60\u4e0d\u662f\u6b64\u7fa4\u7d44\u7684\u6703\u54e1\u3002"],ERROR_ADDING_TO_GROUP_ALREADY_IN_POOL:["\u6b64\u76f8\u7247\u5df2\u5728\u8a72\u7fa4\u7d44\u5206\u4eab\u5340\u4e2d\u4e86\u3002"],ERROR_ADDING_TO_GROUP_MAX_POOLS:["\u62b1\u6b49\uff0c\u7531\u65bc\u7fa4\u7d44\u5206\u4eab\u5340\u6578\u91cf\u5df2\u9054\u5230\u4e0a\u9650\uff0c\u56e0\u6b64\u7121\u6cd5\u5c07\u76f8\u7247\u65b0\u589e\u81f3\u7fa4\u7d44\u3002"],ERROR_ADDING_TO_GROUP_MAX_PHOTOS_FROM_USER:["\u62b1\u6b49\uff0c\u7121\u6cd5\u5c07\u76f8\u7247\u65b0\u589e\u81f3\u7fa4\u7d44\u3002 \u4f60\u65b0\u589e\u81f3\u5206\u4eab\u5340\u7684\u76f8\u7247\u6578\u91cf\u5df2\u9054\u5230\u4e0a\u9650\u3002"],ERROR_ADDING_TO_GROUP_ADDED_TO_QUEUE:["\u5df2\u5c07\u4f60\u7684\u76f8\u7247\u65b0\u589e\u81f3\u7fa4\u7d44\u7684\u5f85\u8655\u7406\u4f47\u5217\u3002"],ERROR_ADDING_TO_GROUP_ALREADY_IN_QUEUE:["\u4f60\u7684\u76f8\u7247\u5df2\u5728\u7fa4\u7d44\u7684\u5f85\u8655\u7406\u4f47\u5217\u4e2d\u4e86\u3002"],ERROR_ADDING_TO_GROUP_INVALID_CONTENT:["\u62b1\u6b49\uff0c\u7121\u6cd5\u5c07\u76f8\u7247\u65b0\u589e\u81f3\u7fa4\u7d44\u3002 \u5982\u9700\u8a73\u7d30\u8cc7\u8a0a\uff0c\u8acb\u67e5\u770b\u5a92\u9ad4\u985e\u578b\u3001\u5167\u5bb9\u985e\u578b\u3001\u5b89\u5168\u5c64\u7d1a\u548c\u5730\u7406\u4f4d\u7f6e\u7684\u7fa4\u7d44\u9700\u6c42\u3002"],ERROR_ADDING_TO_GROUP_MAX_IN_POOL:["\u62b1\u6b49\uff0c\u7121\u6cd5\u5c07\u76f8\u7247\u65b0\u589e\u81f3\u7fa4\u7d44\u3002 \u7fa4\u7d44\u5206\u4eab\u5340\u4e2d\u7684\u76f8\u7247\u6578\u5df2\u9054\u5230\u5141\u8a31\u7684\u4e0a\u9650\u3002"],ERROR_INVITING_TO_GROUP:["\u9080\u8acb\u6b64\u76f8\u7247\u52a0\u5165\u7fa4\u7d44\u6642\u767c\u751f\u554f\u984c"],ERROR_CANCELING_GROUP_INVITIATON:["\u53d6\u6d88\u6b64\u76f8\u7247\u7684\u7fa4\u7d44\u9080\u8acb\u6642\u767c\u751f\u554f\u984c"],NO_MATCHES:["\u6c92\u6709\u76f8\u7b26\u7684\u9805\u76ee"],CREATE_NEW:["\u65b0\u5efa"],ERROR_LOADING_GROUP_INVITATIONS:["\u8f09\u5165\u6b64\u76f8\u7247\u7684\u7fa4\u7d44\u9080\u8acb\u6642\u767c\u751f\u554f\u984c"],NO_GROUP_INVITATIONS:["\u6c92\u6709\u8655\u7406\u4e2d\u7684\u7fa4\u7d44\u9080\u8acb"],PENDING_INVITATIONS_FOR_PHOTO:["\u6b64\u76f8\u7247\u7684\u8655\u7406\u4e2d\u9080\u8acb"],LOADING_INVITATIONS:["\u6b63\u5728\u8f09\u5165\u9080\u8acb"],ERROR_LOADING_GALLERIES:["\u8f09\u5165\u4f60\u7684\u535a\u89bd\u9928\u6642\u767c\u751f\u554f\u984c"],ERROR_ADDING_TO_GALLERY:["\u5c07\u6b64\u76f8\u7247\u65b0\u589e\u81f3\u535a\u89bd\u9928\u6642\u767c\u751f\u554f\u984c"],ERROR_PHOTO_NOT_ALLOWED_IN_GALLERY:["\u6b64\u76f8\u7247\u7684\u64c1\u6709\u8005\u4e0d\u5141\u8a31\u5c07\u76f8\u7247\u65b0\u589e\u81f3\u4f60\u7684\u535a\u89bd\u9928"],ERROR_CREATING_GALLERY:["\u5efa\u7acb\u4f60\u7684\u65b0\u535a\u89bd\u9928\u6642\u767c\u751f\u554f\u984c"],DATE_TAKEN_FORMAT:["\u62cd\u651d\u65e5\u671f\u683c\u5f0f\u5fc5\u9808\u662f MM/DD/YYYY hh:mm:ss\u3002"],DATE_POSTED_FUTURE:["\u767c\u4f48\u65e5\u671f\u4e0d\u53ef\u4ee5\u662f\u672a\u4f86\u7684\u65e5\u671f\u3002"],DATE_UPLOADED_FUTURE:["\u4e0a\u50b3\u65e5\u671f\u4e0d\u80fd\u662f\u672a\u4f86\u65e5\u671f\u3002"],DATE_POSTED_FLICKR_JOIN:["\u767c\u4f48\u65e5\u671f\u5fc5\u9808\u662f\u4f60\u52a0\u5165 Flickr \u4e4b\u5f8c\u7684\u65e5\u671f\u3002"],DATE_UPLOADED_FLICKR_JOIN:["\u4e0a\u50b3\u65e5\u671f\u5fc5\u9808\u662f\u4f60\u52a0\u5165 Flickr \u4e4b\u5f8c\u7684\u65e5\u671f\u3002"],ERROR_SAVING_DATE:["\u5132\u5b58\u65e5\u671f\u6642\u767c\u751f\u932f\u8aa4"],DATE_INVALID:["\u4e00\u6216\u591a\u500b\u65e5\u671f\u7121\u6548"],EDIT_DATES:["\u7de8\u8f2f\u65e5\u671f"],DATE_TAKEN_ON:["\u62cd\u651d\u65e5\u671f"],DATE_POSTED_ON:["\u767c\u4f48\u65e5\u671f"],DATE_UPLOADED_ON:["\u4e0a\u50b3\u65e5\u671f\u70ba"],TAKEN_CIRCA:["\u62cd\u651d\u5e74\u4efd\u70ba ","${intlDate}"],TAKEN_SOMETIME_IN:["\u62cd\u651d\u65e5\u671f\u5927\u7d04\u5e74\u4efd\u70ba ","${intlDate}"],TAKEN_IN:["\u62cd\u651d\u65bc ","${intlDate}"],TAKEN_ON:["\u62cd\u651d\u65bc ",{type:"date",valueName:"intlDate",format:"long"}],UPLOADED_ON:["\u4e0a\u8f09\u65bc ","${intlDate}"],SOMETHING_WENT_WRONG:["\u767c\u751f\u932f\u8aa4\u3002"],REFRESH_BROWSER:["\u8acb\u91cd\u65b0\u6574\u7406\u4f60\u7684\u700f\u89bd\u5668\uff0c\u7136\u5f8c\u518d\u8a66\u4e00\u6b21\u3002"],TWITTER_NOT_FOUND:["\u767c\u4f48\u6642\u627e\u4e0d\u5230 Twitter \u5e33\u865f"],TUMBLR_NOT_FOUND:["\u767c\u4f48\u6642\u627e\u4e0d\u5230 Tumblr \u5e33\u865f"],LINK:["\u9023\u7d50"],LINK_TO_VIDEO:["\u6b64\u8996\u8a0a\u7684\u9023\u7d50\uff1a"],LINK_TO_PHOTO:["\u6b64\u76f8\u7247\u7684\u9023\u7d50\uff1a"],NO_LINKS_FOR_RESTRICTED_VIDEO:["\u9023\u7d50\u4e0d\u9069\u7528\u65bc\u9650\u5236\u8996\u8a0a"],PRIVATE_VIDEO_SHARE:["\u6b64\u70ba\u79c1\u4eba\u8996\u8a0a\uff0c\u4f60\u4ecd\u8981\u5206\u4eab\u8996\u8a0a\u55ce\uff1f"],NO_LINKS_FOR_RESTRICTED_PHOTO:["\u9023\u7d50\u4e0d\u9069\u7528\u65bc\u9650\u5236\u76f8\u7247"],PRIVATE_PHOTO_SHARE:["\u6b64\u70ba\u79c1\u4eba\u76f8\u7247\uff0c\u4f60\u4ecd\u8981\u5206\u4eab\u76f8\u7247\u55ce\uff1f"],SHARING_RESTRICTED_VIDEO:["\u5df2\u91dd\u5c0d\u6b64\u8996\u8a0a\u9650\u5236\u5206\u4eab"],SHARING_RESTRICTED_PHOTO:["\u5df2\u91dd\u5c0d\u6b64\u76f8\u7247\u9650\u5236\u5206\u4eab"],EMBED:["\u5167\u5d4c"],PUBLIC_TO_SHARE:["\u8acb\u516c\u958b\u5206\u4eab\u6b64\u76f8\u7247\u4ee5\u6aa2\u8996\u5167\u5d4c\u7a0b\u5f0f\u78bc"],SIZE:["\u5927\u5c0f\uff1a"],TITLE_AND_OWNER_AT_START:["\u958b\u59cb\u6642\u986f\u793a\u6a19\u984c\u548c\u64c1\u6709\u8005"],SHARE_NOW:["\u7acb\u5373\u5206\u4eab\uff01"],SHARE_PHOTO:["\u5206\u4eab\u76f8\u7247"],SHARE_ON_TWITTER:["\u5728 Twitter \u4e0a\u5206\u4eab"],AUTHORIZE_FOR_TWITTER:["\u8acb\u6388\u6b0a Flickr \u5728 Twitter \u4e0a\u767c\u4f48"],SHARE_ON_TUMBLR:["\u5728 Tumblr \u4e0a\u5206\u4eab"],PUBLISH_NOW:["\u7acb\u5373\u767c\u4f48"],ADD_TO_QUEUE:["\u65b0\u589e\u81f3\u4f47\u5217"],SAVE_AS_DRAFT:["\u5132\u5b58\u70ba\u8349\u7a3f"],AUTHORIZE_FOR_TUMBLR:["\u8acb\u6388\u6b0a Flickr \u5728 Tumblr \u4e0a\u767c\u4f48"],SHARE_VIA_MAIL:["\u900f\u904e\u96fb\u5b50\u90f5\u4ef6\u5206\u4eab"],SCREEN_NAME_OR_EMAIL
:["\u66b1\u7a31\u6216\u96fb\u5b50\u90f5\u4ef6"],SQUARE:["\u6b63\u65b9\u5f62"],SMALL:["\u5c0f"],MEDIUM:["\u4e2d"],LARGE:["\u5927"],ORIGINAL:["\u539f\u672c\u5927\u5c0f"],DUPLICATE_TAG:["\u6a19\u7c64\u91cd\u8907"],INVALID_TAG:["\u6a19\u7c64\u7121\u6548"],MAXIMUM_TAG_LIMIT:["\u5df2\u9054\u5230\u6a19\u7c64\u4e0a\u9650 (76)"],MAX_TAG_LIMIT:["\u5df2\u9054\u5230\u6a19\u7c64\u4e0a\u9650 (75)"],ERROR_ADDING_TAG:["\u65b0\u589e\u6a19\u7c64\u6642\u767c\u751f\u932f\u8aa4"],ERROR_DELETING_TAG:["\u522a\u9664\u6a19\u7c64\u6642\u767c\u751f\u932f\u8aa4"],TAGS:["\u6a19\u7c64"],ADD_TAGS:["\u65b0\u589e\u6a19\u7c64"],ADD_A_TAG:["\u65b0\u589e\u6a19\u7c64"],PHOTO_IN_ONE_GROUP:["\u6b64\u76f8\u7247\u4f4d\u65bc 1 \u500b\u7fa4\u7d44\u5167"],PHOTO_IN_MANY_GROUPS:["\u6b64\u76f8\u7247\u4f4d\u65bc ",{type:"number",valueName:"count"}," \u500b\u7fa4\u7d44\u5167"],PHOTO_IN_NO_GROUPS:["\u6b64\u76f8\u7247\u4e26\u672a\u4f4d\u65bc\u4efb\u4f55\u7fa4\u7d44"],ADD_A_COMMENT:["\u65b0\u589e\u7559\u8a00"],COMMENT_TUTORIAL:["\u6309\u4e0b Enter \u53ef\u767c\u4f48\uff0c\u6309\u4e0b Shift+Enter \u53ef\u63db\u884c"],SIGNED_IN_TO_POST_A_COMMENT:["\u4f60\u5fc5\u9808\u767b\u5165\u624d\u80fd\u767c\u4f48\u7559\u8a00"],SHARE:["\u5206\u4eab"],CODE:["\u4ee3\u78bc"],INCLUDE_A_MESSAGE:["\u5305\u542b\u8a0a\u606f"],FOR_MORE_INFORMATION_SAFESEARCH:['\u5982\u9700\u8a73\u7d30\u8cc7\u8a0a\uff0c\u8acb\u53c3\u95b1<a href="//www.flickr.com/help/photos/?search=flag#145">\u6b64\u5e38\u898b\u554f\u984c</a>\u3002'],FLAG_CONFIRMATION_SAFE_WITHIN:['\u5df2\u5c07\u6b64\u76f8\u7247\u6a19\u8a18\u70ba<a href="//www.flickr.com/help/filters/#258">\u5b89\u5168</a>\uff0c\u4e14\u843d\u5728\u4f60\u7684<a href="//www.flickr.com/account/prefs/safesearch/">\u5b89\u5168\u641c\u5c0b\u8a2d\u5b9a</a>\u4e4b\u4e2d\u3002'],FLAG_CONFIRMATION_SAFE_OUTSIDE:['\u5df2\u5c07\u6b64\u76f8\u7247\u6a19\u8a18\u70ba<a href="//www.flickr.com/help/filters/#258">\u5b89\u5168</a>\uff0c\u4e14\u843d\u5728\u4f60\u7684<a href="//www.flickr.com/account/prefs/safesearch/">\u5b89\u5168\u641c\u5c0b\u8a2d\u5b9a</a>\u4e4b\u5916\u3002'],FLAG_CONFIRMATION_MODERATE_WITHIN:['\u5df2\u5c07\u6b64\u76f8\u7247\u6a19\u8a18\u70ba<a href="//www.flickr.com/help/filters/#258">\u4e2d\u7b49</a>\uff0c\u4e14\u843d\u5728\u4f60\u7684<a href="//www.flickr.com/account/prefs/safesearch/">\u5b89\u5168\u641c\u5c0b\u8a2d\u5b9a</a>\u4e4b\u4e2d\u3002'],FLAG_CONFIRMATION_MODERATE_OUTSIDE:['\u5df2\u5c07\u6b64\u76f8\u7247\u6a19\u8a18\u70ba<a href="//www.flickr.com/help/filters/#258">\u4e2d\u7b49</a>\uff0c\u4e14\u843d\u5728\u4f60\u7684<a href="//www.flickr.com/account/prefs/safesearch/">\u5b89\u5168\u641c\u5c0b\u8a2d\u5b9a</a>\u4e4b\u5916\u3002'],FLAG_CONFIRMATION_RESTRICTED_WITHIN:['\u5df2\u5c07\u6b64\u76f8\u7247\u6a19\u8a18\u70ba<a href="//www.flickr.com/help/filters/#258">\u9650\u5236</a>\uff0c\u4e14\u843d\u5728\u4f60\u7684<a href="//www.flickr.com/account/prefs/safesearch/">\u5b89\u5168\u641c\u5c0b\u8a2d\u5b9a</a>\u4e4b\u4e2d\u3002'],FLAG_CONFIRMATION_RESTRICTED_OUTSIDE:['\u5df2\u5c07\u6b64\u76f8\u7247\u6a19\u8a18\u70ba<a href="//www.flickr.com/help/filters/#258">\u9650\u5236</a>\uff0c\u4e14\u843d\u5728\u4f60\u7684<a href="//www.flickr.com/account/prefs/safesearch/">\u5b89\u5168\u641c\u5c0b\u8a2d\u5b9a</a>\u4e4b\u5916\u3002'],PRIVATE_PHOTO:["\u79c1\u4eba\u76f8\u7247"],PHOTO_UNFIT_FOR_YOUR_EYES:["\u6b64\u76f8\u7247\u4e0d\u5b9c\u89c0\u8cde\u3002 \u770b\u770b\u9019\u96bb\u5c0f\u8c93\u5427\uff1a (^._.^)\uff89"],NO_PHOTO_WITH_THAT_ID:["\u627e\u4e0d\u5230 ID \u70ba ","${photoId}"," \u7684\u76f8\u7247"],NO_MEMBERS_FOUND:["\u627e\u4e0d\u5230\u6703\u54e1"],TAKEN_ON_INTL:["\u62cd\u651d\u65bc ",{type:"date",valueName:"intlDate",format:"long"}],UPLOADED_ON_INTL:["\u4e0a\u8f09\u65bc ",{type:"date",valueName:"intlDate",format:"long"}],TAKEN_IN_MONTH:["\u62cd\u651d\u65bc ",{type:"date",valueName:"intlDate",format:"monthYear"}],VIEW_IN_LIGHTBOX_SHORTCUT:["\u5728\u71c8\u7bb1\u4e2d\u6aa2\u8996"],ZOOM_MAX_MESSAGE:["\u7b49\u4e00\u4e0b\uff01 \u6b64\u76f8\u7247\u5df2\u9054\u5230\u5927\u5c0f\u4e0a\u9650\u3002"],CLICK_TO_FAVE_PHOTO:["\u6309\u4e00\u4e0b\u9019\u88e1\u4ee5\u5c07\u6b64\u76f8\u7247\u52a0\u5165\u6700\u611b"],CLICK_TO_FAVE_VIDEO:["\u6309\u4e00\u4e0b\u9019\u88e1\u4ee5\u5c07\u6b64\u5f71\u7247\u52a0\u5165\u6700\u611b\n"],BACK_TO_ACTIVITY_FEED:["\u8fd4\u56de\u6d3b\u52d5\u8cc7\u8a0a\u63d0\u4f9b"],BACK_TO_PHOTOSTREAM:["\u8fd4\u56de\u6240\u6709\u76f8\u7247"],BACK_TO_SHARED_PHOTOS:["\u8fd4\u56de\u5206\u4eab\u7684\u76f8\u7247"],BACK_TO_ALBUM:["\u8fd4\u56de\u76f8\u7c3f"],BACK_TO_CONTACTS_LIST:["\u8fd4\u56de\u806f\u7d61\u4eba\u6e05\u55ae"],BACK_TO_FAVORITES:["\u8fd4\u56de\u6700\u611b"],BACK_TO_GALLERY:["\u8fd4\u56de\u535a\u89bd\u9928"],BACK_TO_PROFILE:["\u8fd4\u56de\u500b\u4eba\u6a94\u6848"],BACK_TO_EXPLORE:["\u8fd4\u56de\u767c\u6398"],BACK_TO_COMMONS:["\u8fd4\u56de Commons"],BACK_TO_GROUP:["\u8fd4\u56de\u7fa4\u7d44"],BACK_TO_GROUPS:["\u8fd4\u56de\u7fa4\u7d44"],BACK_TO_MAP:["\u8fd4\u56de\u5730\u5716"],BACK_TO_SEARCH:["\u8fd4\u56de\u641c\u5c0b"],BACK_TO_TAG:["\u8fd4\u56de\u6a19\u7c64"],ERROR_ADDING_PHOTOS_TO_ALBUM:["\u5c07\u76f8\u7247\u65b0\u589e\u81f3\u76f8\u7c3f\u6642\u767c\u751f\u554f\u984c"],ERROR_REMOVING_PHOTOS_FROM_ALBUM:["\u5f9e\u76f8\u7c3f\u79fb\u9664\u76f8\u7247\u6642\u767c\u751f\u554f\u984c"],ERROR_CREATING_ALBUM:["\u5efa\u7acb\u4f60\u7684\u65b0\u76f8\u7c3f\u6642\u767c\u751f\u554f\u984c"],STRICTER_PRIVACY_CHANGE_DIALOG_TITLE:["\u6b63\u5728\u8a2d\u5b9a\u70ba\u66f4\u56b4\u683c\u7684\u96b1\u79c1\u6b0a\u5c64\u7d1a"],STRICTER_PRIVACY_CHANGE_DIALOG_MESSAGE:["\u4e00\u65e6\u5c07\u76f8\u7247\u8a2d\u5b9a\u70ba\u66f4\u56b4\u683c\u7684\u96b1\u79c1\u6b0a\u5c64\u7d1a\uff0c\u8a72\u76f8\u7247\u7d2f\u7a4d\u5df2\u88ab\u52a0\u5165\u6700\u611b\u7684\u8a2d\u5b9a\u90fd\u6703\u88ab\u79fb\u9664\u3002 \u9019\u9ebc\u505a\u4e5f\u6703\u6539\u8b8a\u76f8\u7247\u7684 URL\u3002"],TAGS_HELPER_TEXT:["\u6a19\u7c64\u5373\u662f\u95dc\u9375\u5b57\uff0c\u65b9\u4fbf\u7528\u6236\u8f15\u9b06\u5730\u641c\u5c0b\u76f8\u7247\u3002 \u4f60\u53ef\u96a8\u610f\u65b0\u589e\u591a\u500b\u6a19\u7c64\uff0c\u65b9\u4fbf\u597d\u7528\u7684 Flickr \u6a5f\u68b0\u4eba\u6703\u5617\u8a66\u70ba\u4f60\u52a0\u5165\u6a19\u7c64\u3002"
],TAGS_HELP_TEXT:["\u6a19\u7c64\u662f\u8b93\u7528\u6236\u80fd\u8f15\u9b06\u5728\u300cFlickr \u641c\u5c0b\u300d\u627e\u5230\u76f8\u7247\u7684\u95dc\u9375\u5b57\u3002 \u4f60\u52a0\u5165\u7684\u6a19\u7c64\u6703\u4ee5\u6df1\u7070\u8272\u986f\u793a\u3002 \u597d\u7528\u7684 Flickr \u6a5f\u68b0\u4eba\u6703\u5617\u8a66\u70ba\u4f60\u52a0\u5165\u6a19\u7c64\uff0c\u9019\u4e9b\u6a19\u7c64\u5247\u6703\u4ee5\u7070\u8272\u5916\u6846\u7684\u5b57\u578b\u986f\u793a\u3002"],PRIVATE_TAGS_OWNER_HELPER_TEXT:["\u53ea\u6709\u4f60\u3001\u53ef\u6aa2\u8996\u9019\u76f8\u7247\u7684\u5bb6\u4eba\u8207\u670b\u53cb\u624d\u80fd\u770b\u5230\u79c1\u4eba\u6a19\u7c64\u3002"],PRIVATE_TAGS_FRIENDS_FAMILY_HELPER_TEXT:["\u56e0\u70ba\u4f60\u662f\u76f8\u7247\u64c1\u6709\u8005\u7684\u670b\u53cb\u6216\u5bb6\u4eba\uff0c\u53ea\u6709\u4f60\u624d\u80fd\u770b\u5230\u79c1\u4eba\u6a19\u7c64\u3002"],CREATE_WALLART_WITH_PHOTO:["\u4f7f\u7528\u9019\u5f35\u76f8\u7247\u88fd\u4f5c\u76f8\u7247\u639b\u756b"],ERROR_ROTATING_PHOTO:["\u65cb\u8f49\u9019\u5f35\u76f8\u7247\u6642\u767c\u751f\u554f\u984c\uff0c\u8acb\u95dc\u9589\u4e26\u91cd\u8a66\u3002"],ROTATE_PHOTO:["\u65cb\u8f49\u76f8\u7247"],ERROR_REPLACING_PHOTO:["\u53d6\u4ee3\u9019\u5f35\u76f8\u7247\u6642\u767c\u751f\u554f\u984c\uff0c\u8acb\u95dc\u9589\u4e26\u91cd\u8a66\u3002"],REPLACE_PHOTO:["\u53d6\u4ee3\u76f8\u7247"],PERMANENTLY_REPLACE:["\u8981\u6c38\u4e45\u53d6\u4ee3\u9019\u5f35\u76f8\u7247 (","${username}"," \u7684\u300c","${photoTitle}","\u300d) \u70ba <em>","${fileName}","</em> \u55ce\uff1f"],REPLACE_WARNING:["\u53d6\u4ee3\u76f8\u7247\u5f8c\uff0c\u5c07\u7121\u6cd5\u5fa9\u539f\u3002 \u8acb\u9078\u64c7\u4e00\u500b\u6a94\u6848\u4f86\u53d6\u4ee3\u9019\u5f35\u76f8\u7247\u3002"],REPLACE_UPLOADING:["\u6b63\u5728\u4e0a\u50b3 <em>","${fileName}","</em>..."],ERROR_DELETING_PHOTO:["\u522a\u9664\u9019\u5f35\u76f8\u7247\u6642\u767c\u751f\u554f\u984c\uff0c\u8acb\u95dc\u9589\u4e26\u91cd\u8a66\u3002"],SHOW_MORE_STATS:["\u986f\u793a\u66f4\u591a\u7d71\u8a08\u8cc7\u6599"],SIGNUP_AND_DOWNLOAD_TITLE:["\u4f60\u627e\u5230\u60f3\u4e0b\u8f09\u7684\u76f8\u7247\uff01"],SIGNUP_AND_DOWNLOAD_MESSAGE:["\u52a0\u5165 Flickr\uff0c\u5373\u53ef\u5b58\u53d6\u6578\u5341\u5104\u5f35\u7cbe\u7f8e\u76f8\u7247\u3002"],SIGNUP_AND_COMMENT_TITLE:["\u5c0d\u6b64\u76f8\u7247\u767c\u8868\u8a55\u8ad6\uff01"],SIGNUP_AND_COMMENT_MESSAGE:["\u52a0\u5165 Flickr\uff0c\u5373\u53ef\u5c0d\u6b64\u76f8\u7247\u767c\u8868\u8a55\u8ad6\u3002"],IMMERSIFY:["Immersify"],SIGNUP_FOOTER_MESSAGE:["\u52a0\u5165 Flickr \u5373\u53ef\u63a2\u7d22\u4e16\u754c\u7d1a\u76f8\u7247"]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-template-photo-well-media-scrappy",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){var r="",i,s,o;r+='\n	<div class="restricted-interstitial">\n		<div class="restricted-interstitial-message">\n			<h2>',o={hash:{intlName:"photo-page-scrappy.ADULT_CONTENT"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,o):u.call(e,"intlMessage",o)))+"</h2>\n			",s=n["if"].call(e,e.isSignedIn,{hash:{},inverse:l.program(4,p,t),fn:l.program(2,h,t),data:t});if(s||s===0)r+=s;return r+="\n		</div>\n	</div>\n",r}function h(e,t){var r="",i,s;return r+="\n				<p>",s={hash:{intlName:"photo-page-scrappy.MATURE_AUDIENCES"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"<br />",s={hash:{intlName:"photo-page-scrappy.USER_DISCRETION"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</p>\n				<p><button class='ui-button'><span>",s={hash:{intlName:"photo-page-scrappy.SHOW_ME_THIS_CONTENT_TYPE"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</span></button></p>\n				<p>",s={hash:{intlName:"photo-page-scrappy.CHANGE_SAFE_SEARCH_IN_SETTINGS"},data:t},r+=a((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):u.call(e,"intlHTMLMessage",s)))+"</p>\n			",r}function p(e,t){var r="",i,s,o;return r+="\n				<p>",o={hash:{intlName:"photo-page-scrappy.SIGNED_IN_FOR_CONTENT"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,o):u.call(e,"intlMessage",o)))+' <a href="//',(s=n.host)?s=s.call(e,{hash:{},data:t}):(s=e.host,s=typeof s===f?s.apply(e):s),r+=a(s)+'/signin/" data-track="photoWellSignInClick">',o={hash:{intlName:"common.SIGN_IN"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,o):u.call(e,"intlMessage",o)))+"</a></p>\n			",r}function d(e,t){var r="",i;r+="\n	",i=n["if"].call(e,e.isVideo,{hash:{},inverse:l.program(9,m,t),fn:l.program(7,v,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function v(e,t){var r="",i;return r+='\n		<div class="videoplayer main-photo" style="width:',(i=n.width)?i=i.call(e,{hash:{},data:t}):(i=e.width,i=typeof i===f?i.apply(e):i),r+=a(i)+"px; height:",(i=n.height)?i=i.call(e,{hash:{},data:t}):(i=e.height,i=typeof i===f?i.apply(e):i),r+=a(i)+'px;"></div>\n	',r}function m(e,t){var r="",i;r+="\n\n		",i=n["if"].call(e,e.showFuzzy,{hash:{},inverse:l.program(12,y,t),fn:l.program(10,g,t),data:t});if(i||i===0)r+=i;return r+="\n	",r}function g(e,t){var r="",i;return r+='\n		<span class="restricted-image main-photo" style="width:',(i=n.width)?i=i.call(e,{hash:{},data:t}):(i=e.width,i=typeof i===f?i.apply(e):i),r+=a(i)+"px;height:",(i=n.height)?i=i.call(e,{hash:{},data:t}):(i=e.height,i=typeof i===f?i.apply(e):i),r+=a(i)+'px;">\n		</span>\n		',r}function y(e,t){var r="",i,s,o;return r+='\n		<span class="facade-of-protection-neue" style="width:',(i=n.width)?i=i.call(e,{hash:{},data:t}):(i=e.width,i=typeof i===f?i.apply(e):i),r+=a(i)+"px;height:",(i=n.height)?i=i.call(e,{hash:{},data:t}):(i=e.height,i=typeof i===f?i.apply(e):i),r+=a(i)+'px;">\n			',o={hash:{},data:t},r+=a((i=n.outlet||e.outlet,i?i.call(e,e["zoom-view"],o):u.call(e,"outlet",e["zoom-view"],o)))+'\n		</span>\n\n		<img width="',(s=n.width)?s=s.call(e,{hash:{},data:t}):(s=e.width,s=typeof s===f?s.apply(e):s),r+=a(s)+'" height="',(s=n.height)?s=s.call(e,{hash:{},data:t}):(s=e.height,s=typeof s===f?s.apply(e):s),r+=a(s)+'" src="',(s=n.src)?s=s.call(e,{hash:{},data:t}):(s=e.src,s=typeof s===f?s.apply(e):s),r+=a(s)+'" class="low-res-photo" alt="',(s=n.imgAltText)?s=s.call(e,{hash:{},data:t}):(s=e.imgAltText,s=typeof s===f?s.apply(e):s),r+=a(s)+'">\n		<img width="',(s=n.width)?s=s.call(e,{hash:{},data:t}):(s=e.width,s=typeof s===f?s.apply(e):s),r+=a(s)+'" height="',(s=n.height)?s=s.call(e,{hash:{},data:t}):(s=e.height,s=typeof s===f?s.apply(e):s),r+=a(s)+'" src="',(s=n.highResSrc)?s=s.call(e,{hash:{},data:t}):(s=e.highResSrc,s=typeof s===f?s.apply(e):s),r+=a(s)+'" class="main-photo is-hidden" onload="registerFirstPhoto(this)" alt="',(s=n.imgAltText)?s=s.call(e,{hash:{},data:t}):(s=e.imgAltText,s=typeof s===f?s.apply(e):s),r+=a(s)+'">\n		<noscript>\n			<img width="',(s=n.width)?s=s.call(e,{hash:{},data:t}):(s=e.width,s=typeof s===f?s.apply(e):s),r+=a(s)+'" height="',(s=n.height)?s=s.call(e,{hash:{},data:t}):(s=e.height,s=typeof s===f?s.apply(e):s),r+=a(s)+'" src="',(s=n.highResSrc)?s=s.call(e,{hash:{},data:t}):(s=e.highResSrc,s=typeof s===f?s.apply(e):s),r+=a(s)+'" class="main-photo" alt="',(s=n.imgAltText)?s=s.call(e,{hash:{},data:t}):(s=e.imgAltText,s=typeof s===f?s.apply(e):s),r+=a(s)+'">\n		</noscript>\n		',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=n.helperMissing,a=this.escapeExpression,f="function",l=this;o=n["if"].call(t,t.needsInterstitial,{hash:{},inverse:l.program(6,d,i),fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;return s+="\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-well-media-scrappy",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-photo-well-ad",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){var r="",i;return r+='<a class="ad-frame" href="',(i=n.clickUrl)?i=i.call(e,{hash:{},data:t}):(i=e.clickUrl,i=typeof i===a?i.apply(e):i),r+=f(i)+'" data-track="ad_link_image" target="_blank">',r}function d(e,t){var r="",i,s;return r+='\n    <div class="ad-wrapper">\n        <img width=\'',(i=n.width)?i=i.call(e,{hash:{},data:t}):(i=e.width,i=typeof i===a?i.apply(e):i),r+=f(i)+"' height='",(i=n.height)?i=i.call(e,{hash:{},data:t}):(i=e.height,i=typeof i===a?i.apply(e):i),r+=f(i)+"' src='",(i=n.src)?i=i.call(e,{hash:{},data:t}):(i=e.src,i=typeof i===a?i.apply(e):i),r+=f(i)+'\'/>\n        <a class="ad-footer" href="',s={hash:{},data:t},r+=f((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.clickUrl,s):l.call(e,"renderTrustedMarkup",e.clickUrl,s)))+'" data-track="ad_link_bottom" target="_blank">\n            <h1>',s={hash:{intlName:"photo-page-scrappy.FIND_OUT_MORE_AD",brand:e.brand},data:t},r+=f((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):l.call(e,"intlHTMLMessage",s)))+"</h1>\n        </a>\n    </div>\n",r}function v(e,t){var r="",i;return r+="\n    <img width='",(i=n.width)?i=i.call(e,{hash:{},data:t}):(i=e.width,i=typeof i===a?i.apply(e):i),r+=f(i)+"' height='",(i=n.height)?i=i.call(e,{hash:{},data:t}):(i=e.height,i=typeof i===a?i.apply(e):i),r+=f(i)+"' src='",(i=n.src)?i=i.call(e,{hash:{},data:t}):(i=e.src,i=typeof i===a?i.apply(e):i),r+=f(i)+"' />\n",r}function m(e,t){var r="",i,s;return r+='\n<div class="more-info"> \n\n	<span><i class="moneyball"></i> ',s={hash:{intlName:"photo-page-scrappy.FIND_OUT_MORE_AD",brand:e.brand},data:t},r+=f((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):l.call(e,"intlHTMLMessage",s)))+"</span>\n</div>\n</a>",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing,c=this,h=n.blockHelperMissing;o=n["if"].call(t,t.adFrame,{hash:{},inverse:c.noop,fn:c.program(1,p,i),data:i});if(o||o===0)s+=o;s+="\n\n",u={hash:{},inverse:c.noop,fn:c.program(3,d,i),data:i},(o=n.adsTypeB)?o=o.call(t,u):(o=t.adsTypeB,o=typeof o===a?o.apply(t):o),n.adsTypeB||(o=h.call(t,o,u));if(o||o===0)s+=o;s+="\n",u={hash:{},inverse:c.program(5,v,i),fn:c.noop,data:i},(o=n.adsTypeB)?o=o.call(t,u):(o=t.adsTypeB,o=typeof o===a?o.apply(t):o),n.adsTypeB||(o=h.call(t,o,u));if(o||o===0)s+=o;s+="\n\n",o=n["if"].call(t,t.adFrame,{hash:{},inverse:c.noop,fn:c.program(7,m,i),data:i});if(o||o===0)s+=o;return s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-well-ad",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("photo-well-media-scrappy-view",function(e){var t=500,n=500,r=40,i;i={photo:{render:function(){var t=this,n,r=this.get("photo"),i,s,o,u="";t.preloadImage&&(t.preloadImage.onload=null),this.appContext.forceServerRender?(i=this.getPhotoForDisplay({canvas:{width:Number.MAX_VALUE,height:Number.MAX_VALUE}}),s=i):(i=this.getPhotoForDisplay(),s=this.getPhotoForDisplay({includeSizes:["sq","q","t","s","n"]})),r.getValue("owner")&&(r.getValue("title").trim()===""?u=this.intlMessage({intlName:"common.UNTITLED"}):u=r.getValue("title"),u+=" | "+this.intlMessage({intlName:"common.BY_USER",user:r.getValue("owner").getValue("username")})),o=this.get("container").one(".main-photo");if(!o||parseInt(o.getAttribute("width"),10)!==i.width||parseInt(o.getAttribute("height"),10)!==i.height)n=this.templates("photo-well-media-scrappy")({width:i.width,height:i.height,src:s.url,highResSrc:i.url,imgAltText:u,needsInterstitial:r.getValue("needsInterstitial"),isSignedIn:this.appContext.getViewer().signedIn,isVideo:!1,"zoom-view":this.subviews["zoom-view"]?this.subviews["zoom-view"].get("container"):""}),this.setContainerHTML(n);return YUI.Env.isServer?(this.serverWidth=i.width,this.serverHeight=i.height):r.getValue("needsInterstitial")||(t.preloadImage=new Image,t.preloadImage.onload=function(){if(this.onloadFired)return;if(!t.isActiveAndInDOM())return;this.onloadFired=!0,e.rapidTracker.beacon(this.name,"photoPageShowedSize"+(/(?:_([a-z]))?\.jpg/.exec(i.url)[1]||"\u00f8").toUpperCase());var n=t.get("container").one(".low-res-photo"),r=t.get("container").one(".main-photo");r.removeClass("is-hidden").show(),n.hide()},t.preloadImage.src=i.url,t.preloadImage.complete&&t.preloadImage.onload()),this}},video:{render:function(){var t,n=this,r=this.get("photo"),i=this.getPhotoForDisplay({excludeSizes:[]});return this.player?(this.player.resize(i.width,i.height),this):(t=this.templates("photo-well-media-scrappy")({width:i.width,height:i.height,src:i.url,needsInterstitial:r.getValue("needsInterstitial"),isVideo:!0,isSignedIn:this.appContext.getViewer().signedIn,"zoom-view":""}),this.setContainerHTML(t),YUI.Env.isServer?this:(this.player=new e.FlickrVideoPlayer({container:this.get("container").one(".videoplayer"),model:r,appContext:this.appContext}),n.player.init().then(function(){}),this.on("destroy",function(){n.player.destroy(),n.player=null}),this))}},ad:{render:function(){var e,t,n;return this.adJSON?t=this.adJSON:(t=this.appContext.adManager.getAdJSON(),this.adJSON=t),n=this.getAdSize(t),e=this.templates("photo-well-ad")({width:n.width,height:n.height,src:t.url,clickUrl:t.clickUrl,brand:t.brand,adsTypeB:this.appContext.flipper.isFlipped("moneyball-ads-type-b"),adFrame:!0}),this.setContainerHTML(e),this}}},e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,subviewConfig:{"zoom-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(){return!this.appContext.flipper.isFlipped("enable-scrappy-zoom")}}},initializer:function(e){return this.photoId=e.photoId,this.isAd=!!e.ad,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},loadState:function(){var e=this;return this.appContext.getModel("photo-models",e.photoId).then(function(t){e.set("photo",t)})},buildContainer:function(){return YUI.Env.isServer||this.set("clientRendered",!0),this.isAd?i.ad.render.call(this):i[this.get("photo").getValue("isVideo")?"video":"photo"].render.call(this),this},handleInterstitialDismissButtonClick:function(t){var n=this,r=this.get("personPreferences"),i=this.get("photo"),s=i.getValue("safetyLevel");e.rapidTracker.beacon(this.name,"restrictedContentInterstitialClick"),r.setValue("safeSearch",s),r.registry.remoteUpdate(n.appContext.auth.user.nsid).then(function(e){var t=i.registry.attributeSearch({needsInterstitial:!0});t.forEach(function(e){i.registry.getValue(e,"safetyLevel")<=r.getValue("safeSearch")&&i.registry.setValue(e,"needsInterstitial",!1)}),n.buildContainer()},function(t){e.Flog.error(t.message),e.Flog.error(t.stack),n.onError(n.intlMessage({intlName:"photo-page-scrappy.COULDNT_UPDATE_SETTINGS"}))})},onParentViewEvent:function(e,t){t&&t[0]==="photoWellResized"&&(this.get("photo").getValue("needsInterstitial")||(this.set("canvasSizeIsDirty",!0),this.buildContainer()))},activate:function(){var t=this,n,r;return this.get("photo").getValue("needsInterstitial")||this.registerEventHandler(e.on("flickr:photo-media-well-update",function(e){t.set("canvasSizeIsDirty",!0),t.buildContainer()})),this.registerEventHandler(e.on("flickr:display-note-box",function(i){n=e.Node.create('<div class="note-box"></div>'),r=t.get("container").one(".main-photo").getXY(),t.get("container").append(n),n.setStyles({top:i.noteBoxTop+t.get("container").one(".main-photo").getDOMNode().offsetTop,left:i.noteBoxLeft,width:i.noteBoxWidth,height:i.noteBoxHeight})})),this.appContext.getViewer().signedIn&&this.appContext.getModel("person-preferences-models",t.appContext.auth.user.nsid).then(function(e){t.set("personPreferences",e),t.get("photo").getValue("needsInterstitial")&&t.registerEventHandler(t.get("container").one(".restricted-interstitial-message button").on("click",t.handleInterstitialDismissButtonClick,t))}),this},onError:function(t){var n=this;this.fire("subviewViewEvent","getDialogOffset",function(r){var i=e.Views.dialog.getInstance("dialog-alert",{content:t,attrs:{title:"Error",level:"warning",confirmLabel:"OK"},parent:n,offsetLeft:r,dialogClass:"scrappy-dialog"});i.show()})},getPhotoForDisplay:function(e){var t=this.getCanvasSize(),n=this.getPixelRatio(),r,i,s;return e&&e.canvasSize&&(t=e.canvasSize),r=this.get("photo").getSizeToFit(t,e),i=Math.min(t.height/n,r.height),s=Math.min(t.width/n,r.width/r.height*i),i=Math.min(i,r.height/r.width*s),{width:Math.round(s),height:Math.round(i),url:r.url,pixelRatio:r.width/s}},getAdSize:function(e){var t=this.getCanvasSize(),n=this.getPixelRatio(),r=80,i=140,s,o;return this.appContext.flipper.isFlipped("moneyball-ads-type-b")&&(t.height-=(r+i)*
n,t.width-=i*n),s=Math.min(t.height/n,e.height),o=Math.min(t.width/n,e.width/e.height*s),s=Math.min(s,e.height/e.width*o),{width:o,height:s}},getCanvasSize:function(){var e,i=this.getPixelRatio(),s,o=this.get("container"),u,a,f,l,c={width:t,height:n};return this.get("canvasSizeIsDirty")?YUI.Env.isServer||(s=this.get("container").ancestor(),u=o.getStyle("paddingTop")?parseInt(o.getStyle("paddingTop").match(/[0-9]+/)[0],10):0,a=o.getStyle("paddingBottom")?parseInt(o.getStyle("paddingBottom").match(/[0-9]+/)[0],10):0,l=r,f=r,s&&(e=s.get("region"),e.height=parseInt(s.getStyle("height").match(/[0-9]+/)[0],10)-(u+a),e.width=this.appContext.viewportData.viewport.width-(l+f))):e=this.get("cachedCanvasSize"),this.appContext.viewportData.viewport.width>0&&(c={width:this.appContext.viewportData.viewport.width,height:this.appContext.viewportData.viewport.height-240}),e||(e={top:0,left:0,bottom:n,right:t,width:c.width,height:c.height}),e.height*=i,e.width*=i,e},getPixelRatio:function(){return this.appContext.getViewer().getPixelRatio()}},{ATTRS:{canvasSizeIsDirty:{value:!0,setter:function(e){return!!e}},cachedCanvasSize:{getter:function(t){return e.merge(t)},setter:function(t){return e.merge(t)}}}})},"@VERSION@",{requires:["flog","flickr-view","moment","flickr-video-player","zoom-view","hermes-template-photo-well-media-scrappy","hermes-template-photo-well-ad"],optional:["photo-models"],langBundles:["common","photo-page-scrappy"]});
YUI.add("hermes-template-context-slider-photo",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function l(e,t){return"currentImage"}function c(e,t){return"restricted-image"}function h(e,t){return"\n		<span class='play-slideshow'>&#9654;</span>\n		<span class='countdown-slideshow'></span>\n	"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this,a="function",f=this.escapeExpression;s+='<a class="context-thumb emptyImage ',o=n["if"].call(t,t.currentPhoto,{hash:{},inverse:u.noop,fn:u.program(1,l,i),data:i});if(o||o===0)s+=o;s+=" ",o=n["if"].call(t,t.needsInterstitial,{hash:{},inverse:u.noop,fn:u.program(3,c,i),data:i});if(o||o===0)s+=o;s+='" href="',(o=n.url)?o=o.call(t,{hash:{},data:i}):(o=t.url,o=typeof o===a?o.apply(t):o),s+=f(o)+'" data-track="contextSliderNextPhotoClick" style="background-image: url(',(o=n.background)?o=o.call(t,{hash:{},data:i}):(o=t.background,o=typeof o===a?o.apply(t):o),s+=f(o)+"); left: ",(o=n.left)?o=o.call(t,{hash:{},data:i}):(o=t.left,o=typeof o===a?o.apply(t):o),s+=f(o)+'px" data-photo-id="',(o=n.id)?o=o.call(t,{hash:{},data:i}):(o=t.id,o=typeof o===a?o.apply(t):o),s+=f(o)+'" title="',(o=n.title)?o=o.call(t,{hash:{},data:i}):(o=t.title,o=typeof o===a?o.apply(t):o),s+=f(o)+'">\n	',o=n["if"].call(t,t.currentPhoto,{hash:{},inverse:u.noop,fn:u.program(5,h,i),data:i});if(o||o===0)s+=o;return s+="\n</a>",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/context-slider-photo",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-context-slider-scrappy",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function l(e,t){var r="",i,s;return r+="\n	<div class='loadingError'>\n		<p>",s={hash:{intlName:"photo-page-scrappy.ERROR_LOADING_CONTEXT"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+'</p>\n		<p><button href="#" class="ui-button ui-button-cta ui-button-transparent retry">',s={hash:{intlName:"common.RETRY"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</button></p>\n	</div>\n",r}function c(e,t){var r="",i;r+="\n\n	<div class='context-slider small-slider ",i=n["if"].call(e,e.slideshowEnabled,{hash:{},inverse:f.noop,fn:f.program(4,h,t),data:t});if(i||i===0)r+=i;r+='\'>\n\n		<div class="wrapper is-ready clear-float small-photos">\n\n			<div class="slider">\n\n				',i=n.each.call(e,e.previousPhotos,{hash:{},inverse:f.noop,fn:f.program(6,p,t),data:t});if(i||i===0)r+=i;r+="\n\n				",i=n["if"].call(e,e["is-ad"],{hash:{},inverse:f.program(10,v,t),fn:f.program(8,d,t),data:t});if(i||i===0)r+=i;r+="\n\n\n				",i=n.each.call(e,e.nextPhotos,{hash:{},inverse:f.noop,fn:f.program(6,p,t),data:t});if(i||i===0)r+=i;r+="\n\n			</div>\n\n		</div>\n\n	</div>\n\n	",i=n["if"].call(e,e.showBigSlider,{hash:{},inverse:f.noop,fn:f.program(13,g,t),data:t});if(i||i===0)r+=i;return r+="\n\n",r}function h(e,t){return"slideshowEnabled"}function p(e,t){var i="",s;i+="\n					",s=f.invokePartial(r["context-slider-photo"],"context-slider-photo",e,n,r,t);if(s||s===0)i+=s;return i+="\n				",i}function d(e,t){return'\n					<a class="context-thumb middle currentImage adThumb">Ad</a>\n				'}function v(e,t){var r="",i;r+="\n					",i=n.each.call(e,e.currentPhoto,{hash:{},inverse:f.noop,fn:f.program(11,m,t),data:t});if(i||i===0)r+=i;return r+="\n				",r}function m(e,t){var i="",s;i+="\n						",s=f.invokePartial(r["context-slider-photo"],"context-slider-photo",e,n,r,t);if(s||s===0)i+=s;return i+="\n					",i}function g(e,t){var r="",i,s,o;r+="\n		<div class='context-slider big-slider ",i=n["if"].call(e,e.slideshowEnabled,{hash:{},inverse:f.noop,fn:f.program(4,h,t),data:t});if(i||i===0)r+=i;r+='\'>\n\n			<span class="nav nav-l">\n				<span class="hide-text">&larr;</span>\n			</span>\n\n			<div class="wrapper clear-float">\n\n				<div class="slider">\n\n					',o={hash:{},data:t},r+=a((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.previousBigPhotos,o):u.call(e,"renderTrustedMarkup",e.previousBigPhotos,o)))+"\n\n					",s=n["if"].call(e,e["is-ad"],{hash:{},inverse:f.program(16,b,t),fn:f.program(14,y,t),data:t});if(s||s===0)r+=s;return r+="\n\n					",o={hash:{},data:t},r+=a((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.nextBigPhotos,o):u.call(e,"renderTrustedMarkup",e.nextBigPhotos,o)))+'\n\n				</div>\n\n			</div>\n\n			<span class="nav nav-r">\n				<span class="hide-text">&rarr;</span>\n			</span>\n\n		</div>\n	',r}function y(e,t){return'\n						<a class="context-thumb middle currentImage adThumb">Ad</a>\n					'}function b(e,t){var r="",i;r+="\n						",i=n.each.call(e,e.currentPhoto,{hash:{},inverse:f.noop,fn:f.program(17,w,t),data:t});if(i||i===0)r+=i;return r+="\n					",r}function w(e,t){var i="",s;i+="\n							",s=f.invokePartial(r["context-slider-photo"],"context-slider-photo",e,n,r,t);if(s||s===0)i+=s;return i+="\n						",i}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=this.merge(r,e.partials),i=i||{};var s="",o,u=n.helperMissing,a=this.escapeExpression,f=this;o=n["if"].call(t,t.loadingError,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n",s}),r={};e.Array.each(["context-slider-photo","context-slider-photo","context-slider-photo","context-slider-photo"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/context-slider-scrappy",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-context-slider-photo","hermes-template-context-slider-photo","hermes-template-context-slider-photo","hermes-template-context-slider-photo"]});
YUI.add("hermes-template-context-image",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function f(e,t){var r="",i;return r+='\n\n	<a data-loaded="false" style="left:',(i=n.left)?i=i.call(e,{hash:{},data:t}):(i=e.left,i=typeof i===o?i.apply(e):i),r+=u(i)+';float:left;display:block;position:absolute;background-color:gray;height:40px;width:86px;border:1px solid transparent;" href="#">\n		\n	</a>\n\n',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o="function",u=this.escapeExpression,a=this;return s=n.each.call(t,t.images,{hash:{},inverse:a.noop,fn:a.program(1,f,i),data:i}),s||s===0?s:""}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/context-image",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-context-text",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='\n\n<span data-loaded="true" style="left:',(o=n.left)?o=o.call(t,{hash:{},data:i}):(o=t.left,o=typeof o===u?o.apply(t):o),s+=a(o)+';float:left;display:block;position:absolute;height:40px;width:86px;border:1px solid #ccc;" href="#">\n	',(o=n.text)?o=o.call(t,{hash:{},data:i}):(o=t.text,o=typeof o===u?o.apply(t):o),s+=a(o)+"\n</span>\n\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/context-text",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("context-slider-scrappy-view",function(e,t){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.photoId=t.photoId,this.contextData=e.clone(t.context,!0),this.currentPosition=0,this.numberOfPhotosEitherSideInViewPort=3,this.numberOfPositionsToMove=3,this.numberOfPositionsToBuffer=3,this.positionsLoadedNext=0,this.positionsLoadedPrev=0,this.positionsAheadLimit=25,this.numberOfPositionsToPreFetch=t.numberOfPositionsToPreFetch,this.numberOfPositionsToRefetchAt=t.numberOfPositionsToRefetchAt,this.photoWidth=50,this.photoMargin=15,this.photoWidthPlusMargin=65,this.photoWidthSmall=20,this.photoMarginSmall=5,this.photoWidthPlusMarginSmall=25,this.atStart=!1,this.atEnd=!1,this.isAd=!!t.ad,this.photosInSlider={},!YUI.Env.isServer&&e.StorageHelper.getItem("slideshowInProgress")==="true"?this.slideshowInProgress=!0:this.slideshowInProgress=!1,this.slideshowDwellSeconds=5,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},loadState:function(){var t=this,n=t.contextData,r=new e.FlickrPromise({photo:t.appContext.getModel("photo-models",t.photoId),context:t.appContext.getModel(n.modelName,n.params)});return r.then(function(e){t.set("photo",e.photo),t.set("contextModel",e.context)},function(e){if(!e.getModelFailure&&e.code!==1||n.modelName==="photostream-models")throw e;return t.contextData.modelName="photostream-models",t.appContext.getModel("photo-models",t.photoId).then(function(e){return t.set("photo",e),t.contextData.params.id=t.get("photo").getValue("owner").getValue("nsid"),t.appContext.getModel("photostream-models",t.contextData.params).then(function(e){t.set("contextModel",e)})})}).then(function(){var r=e.merge(n.params,{photoId:t.photoId,numNext:t.numberOfPositionsToPreFetch,numPrev:t.numberOfPositionsToPreFetch,refetchAt:t.numberOfPositionsToRefetchAt});return t.get("contextModel").getValue("photoContextList").getContext(r)}).then(function(e){t.positionsLoadedNext=t.positionsLoadedNext+e.next.length,t.positionsLoadedPrev=t.positionsLoadedPrev+e.previous.length,t.photosInSlider[0]=t.get("photo").getValue("id"),t.set("initialContextResponse",e)},function(e){if(e.notInContext||e.code===99)return t.get("contextModel").setValue("photoContextList",[]),t.contextData.modelName="photostream-models",t.contextData.params.id=t.get("photo").getValue("owner").getValue("nsid"),t.loadState();throw e}).then(null,function(t){throw e.Flog.warn("There was a problem loading the context slider data.",t&&t.message?t.message:t,t&&t.stack?t.stack:""),t})},assignContextPositionsAndAddToDOM:function(e){var t=this.get("container"),n=t.one(".small-slider .slider"),r=t.one(".big-slider .slider"),i=e.contextResponse,s,o,u;for(u=0;u<i.previous.length;u++)o=-1-u,typeof this.photosInSlider[o]=="undefined"&&(s=i.previous[u].toJSON(),this.photosInSlider[o]=i.previous[u].getValue("id"),s.left=o*this.photoWidthPlusMarginSmall,s.background=this.getBackgroundImage(i.previous[u]),s.url=this.getContextifiedURLForPhoto(i.previous[u]),n.append(this.templates("context-slider-photo")(s)),s.left=o*this.photoWidthPlusMargin,r.append(this.templates("context-slider-photo")(s)));for(u=0;u<i.next.length;u++)o=1+u,typeof this.photosInSlider[o]=="undefined"&&(s=i.next[u].toJSON(),this.photosInSlider[o]=i.next[u].getValue("id"),s.left=o*this.photoWidthPlusMarginSmall,s.background=this.getBackgroundImage(i.next[u]),s.url=this.getContextifiedURLForPhoto(i.next[u]),n.append(this.templates("context-slider-photo")(s)),s.left=o*this.photoWidthPlusMargin,r.append(this.templates("context-slider-photo")(s)))},checkBoundary:function(e){var t=e.contextResponse,n=e.requestedPreviousAmount,r=e.requestedNextAmount,i=e.positionWhenChecking,s=this.get("contextModel").getValue("photoContextList"),o=this.get("container"),u=o.one(".nav-l"),a=o.one(".nav-r");this.currentPosition-this.numberOfPhotosEitherSideInViewPort>this.positionsLoadedNext&&this.move(-Math.abs(this.currentPosition-this.positionsLoadedNext)),this.currentPosition<0&&Math.abs(this.currentPosition+this.numberOfPhotosEitherSideInViewPort)>this.positionsLoadedPrev&&this.move(Math.abs(this.currentPosition+this.numberOfPhotosEitherSideInViewPort)-this.positionsLoadedPrev),s.hasMinBoundary()&&t.previous.length-Math.abs(i)<=this.numberOfPhotosEitherSideInViewPort&&n>0&&(u.hide(),this.atStart=!0),s.hasMaxBoundary()&&t.next.length-Math.abs(i)<=this.numberOfPhotosEitherSideInViewPort&&r>0&&(a.hide(),this.atEnd=!0)},buildContainer:function(){function a(e,r,i,s){e>3&&(e=3);var o=t[r],u="";for(var a=0;a<e;a++){var f=o[a],l=f.toJSON(),c=(a+1)*n.photoWidthPlusMarginSmall*s;l.background=n.getBackgroundImage(f),l.currentPhoto=!1,l.url=n.getContextifiedURLForPhoto(f),l.left=c/n.photoWidthPlusMarginSmall*n.photoWidthPlusMargin,u+=n.templates("context-slider-photo")(l),l.left=c,i.push(l),n.photosInSlider[""+(a+1)*s]=l}return u}var e=this.get("photo").toJSON(),t=this.get("initialContextResponse"),n=this,r;e.background=this.getBackgroundImage(this.get("photo")),e.left=0,e.currentPhoto=!0,e.url=this.getContextifiedURLForPhoto(this.get("photo"));var i=[],s=[],o="",u="";this.positionsLoadedNext>0&&(u=a(this.positionsLoadedNext,"next",i,1)),this.positionsLoadedPrev>0&&(o=a(this.positionsLoadedPrev,"previous",s,-1)),r=this.templates("context-slider-scrappy")({previousPhotos:s,nextPhotos:i,previousBigPhotos:o,nextBigPhotos:u,currentPhoto:[e],slideshowEnabled:this.appContext.flipper.isFlipped("enable-photopage-slideshow"),"is-ad":this.isAd,showBigSlider:!this.appContext.forceServerRender}),this.isAd&&(t.next.pop(),t.next=[this.get("photo")].concat(t.next)),this.setContainerHTML(r)},buildErrorContainer:function(){this.setContainerHTML(this.templates("context-slider-scrappy")({loadingError:!0}))},activate:function(){var t=this,n=t.get("container"),r=n.one(".big-slider"),i=!1,s,o,u=this.appContext.getViewer().prefs.keyboardShortcutsEnabled,a=this.numberOfPhotosEitherSideInViewPort;return this.assignContextPositionsAndAddToDOM({contextResponse
:this.get("initialContextResponse"),requestedPreviousAmount:a,requestedNextAmount:a}),this.checkBoundary({contextResponse:this.get("initialContextResponse"),requestedPreviousAmount:a,requestedNextAmount:a,positionWhenChecking:this.currentPosition}),e.StorageHelper.getItem("showBigContextSlider")==="true"?(n.addClass("hover"),setTimeout(function(){n.setStyle("transition","opacity 300ms ease-out, background-position 150ms ease-out"),n.all(".context-slider").setStyle("transition","opacity 300ms ease-out")},300)):(n.setStyle("transition","opacity 300ms ease-out, background-position 150ms ease-out"),n.all(".context-slider").setStyle("transition","opacity 300ms ease-out")),this.appContext.flipper.isFlipped("enable-photopage-slideshow")&&(this.slideshowInProgress&&this.startSlideshow(),this.registerEventHandler(this.get("container").all(".currentImage").on("click",function(e){e.preventDefault(),t.slideshowInProgress?t.stopSlideshow():t.startSlideshow()}))),e.use("transition",function(e){var a=t.get("container").one(".nav-l"),f=t.get("container").one(".nav-r");a&&t.registerEventHandler(a.on("click",function(){n.setStyle("transition","opacity 300ms ease-out"),e.rapidTracker.beacon(t.name,"contextSliderMoveLeftClick"),t.move(-1*t.numberOfPositionsToMove)})),f&&t.registerEventHandler(f.on("click",function(){n.setStyle("transition","opacity 300ms ease-out"),e.rapidTracker.beacon(t.name,"contextSliderMoveRightClick"),t.move(1*t.numberOfPositionsToMove)})),u&&(t.attachKeyEvent("down:188",e.betterThrottle(function(r){e.rapidTracker.beacon(t.name,"contextSliderMoveLeftKeyPress"),n.addClass("hover"),t.bringIntoFocus(),t.atStart||t.move(-1*t.numberOfPositionsToMove)},20)),t.attachKeyEvent("down:190",e.betterThrottle(function(r){e.rapidTracker.beacon(t.name,"contextSliderMoveRightKeyPress"),n.addClass("hover"),t.bringIntoFocus(),t.atEnd||t.move(1*t.numberOfPositionsToMove)},20))),t.registerEventHandler(n.on("hover",function(){i=!0,clearTimeout(s),s=setTimeout(function(){i&&n.addClass("hover")},150)},function(){i=!1,clearTimeout(o),e.StorageHelper.setItem("showBigContextSlider","false"),o=setTimeout(function(){i||(n.setStyles({width:"100%",height:"80px"}),r.setStyle("height","80px"),n.removeClass("hover"),setTimeout(function(){n.removeAttribute("style"),r.removeAttribute("style")},300))},500)})),t.registerEventHandler(n.all(".context-thumb:not(.currentImage)").on("click",function(){e.StorageHelper.setItem("showBigContextSlider","true")}))}),this},startSlideshow:function(){function s(){if(r===0&&t.slideshowInProgress){t.appContext.flapp.navigate(n);return}i.all(".currentImage .countdown-slideshow").set("text",r),r-=1}this.slideshowInProgress=!0;var t=this,n=this.getContextifiedURLForPhoto(this.get("initialContextResponse").next[0]),r=this.slideshowDwellSeconds,i=this.get("container");e.StorageHelper.setItem("slideshowInProgress","true"),i.all(".currentImage .play-slideshow").hide(),s(),this.slideshowTimer=setInterval(function(){s()},1e3)},stopSlideshow:function(){this.slideshowInProgress=!1,this.get("container").all(".currentImage .countdown-slideshow").set("text",""),this.get("container").all(".currentImage .play-slideshow").show(),clearInterval(this.slideshowTimer),e.StorageHelper.setItem("slideshowInProgress","false")},move:function(t){var n=this,r=this.get("contextModel").getValue("photoContextList"),i=t>0?"right":"left",s=this.get("container"),o=s.one(".big-slider .slider"),u=s.one(".small-slider .slider"),a,f,l,c,h,p=s.one(".nav-l"),d=s.one(".nav-r"),v;if(i==="right"&&this.currentPosition-this.positionsLoadedNext>this.positionsAheadLimit)return!1;if(i==="left"&&this.currentPosition<=0&&Math.abs(this.currentPosition)-this.positionsLoadedPrev>this.positionsAheadLimit)return!1;s.addClass("hover"),this.currentPosition+=t,v=this.currentPosition,typeof this.photosInSlider[this.currentPosition+this.numberOfPhotosEitherSideInViewPort+1]!="undefined"&&(d.show(),this.atEnd=!1),typeof this.photosInSlider[this.currentPosition-(this.numberOfPhotosEitherSideInViewPort+1)]!="undefined"&&(p.show(),this.atStart=!1),a=this.currentPosition*this.photoWidthPlusMargin*-1,f=this.currentPosition*this.photoWidthPlusMarginSmall*-1,o.transition({left:a+"px",duration:.3,easing:"ease-out"}),u.setStyle("left",f+"px"),i==="right"?c=this.currentPosition+this.numberOfPositionsToMove+this.numberOfPositionsToBuffer:i==="left"&&(c=this.currentPosition-(this.numberOfPositionsToMove+this.numberOfPositionsToBuffer)),l=typeof this.photosInSlider[c]=="undefined",l&&(h=e.merge(n.contextData.params,{photoId:this.get("photo").getValue("id"),refetchAt:this.numberOfPositionsToRefetchAt}),i==="right"?h.numNext=Math.abs(c)+this.numberOfPositionsToPreFetch:i==="left"&&(h.numPrev=Math.abs(c)+this.numberOfPositionsToPreFetch),r.getContext(h).then(function(e){n.positionsLoadedNext=typeof h.numNext!="undefined"?h.numNext:n.positionsLoadedNext,n.positionsLoadedPrev=typeof h.numPrev!="undefined"?h.numPrev:n.positionsLoadedPrev,n.assignContextPositionsAndAddToDOM({contextResponse:e,requestedPreviousAmount:h.numPrev,requestedNextAmount:h.numNext}),n.checkBoundary({contextResponse:e,requestedPreviousAmount:h.numPrev,requestedNextAmount:h.numNext,positionWhenChecking:v})},function(e){n.checkBoundary({contextResponse:{previous:[],next:[]},requestedPreviousAmount:h.numPrev,requestedNextAmount:h.numNext,positionWhenChecking:v})}))},getBackgroundImage:function(e){var t,n=this.appContext.getViewer().getPixelRatio(),r;return t={width:this.photoWidth*n,height:this.photoWidth*n},r={cropToFit:!0,includeSizes:["sq","t","q","s","n"]},e.getSizeToFit(t,r).url},getContextifiedURLForPhoto:function(t){if(t){var n=e.URLHelper.getPhotoPage({photoId:t.getValue("id"),pathAlias:t.getValue("owner").getValue("pathAlias"),contextSuffix:this.get("contextModel").getValue("urlSuffix")});return n}},beforeDestroy:function(){clearInterval(this.slideshowTimer)}})},"@VERSION@",{requires:["flickr-view","flog","hermes-template-context-slider-scrappy","hermes-template-context-slider-photo","hermes-template-context-image"
,"hermes-template-context-text","context-slider-scrappy-css","storage-helper"],optional:[],langBundles:["common","photo-page-scrappy"]});
YUI.add("hermes-template-photo-engagement",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){var r="",i,s;r+='\n	<div class="wallart',i=n["if"].call(e,e.isWallartLowQuality,{hash:{},inverse:f.noop,fn:f.program(2,d,t),data:t});if(i||i===0)r+=i;return r+='">\n		<a href="#" title="',s={hash:{intlName:"photo-page-scrappy.CREATE_WALLART_WITH_PHOTO"},data:t},r+=c((i=n.intlMessage||e.intlMessage,i?i.call(e,s):l.call(e,"intlMessage",s)))+'">\n			<i class="ui-icon-wallart"></i>\n		</a>\n	</div>\n',r}function d(e,t){return" dimmed"}function v(e,t){var r="",i,s;return r+="\n	",s={hash:{},data:t},r+=c((i=n.outlet||e.outlet,i?i.call(e,e["photo-well-scrappy-edit-view"],s):l.call(e,"outlet",e["photo-well-scrappy-edit-view"],s)))+"\n",r}function m(e,t){var r="",i,s;return r+="\n	",s={hash:{},data:t},r+=c((i=n.outlet||e.outlet,i?i.call(e,e["fave-view"],s):l.call(e,"outlet",e["fave-view"],s)))+"\n",r}function g(e,t){return"disabled"}function y(e,t){var r="",i,s;return r+='\n		<a href="',(i=n.downloadLink)?i=i.call(e,{hash:{},data:t}):(i=e.downloadLink,i=typeof i===h?i.apply(e):i),r+=c(i)+'" class="server-only-link" title="',s={hash:{intlName:"photo-page-scrappy.DOWNLOAD_THIS_VIDEO"},data:t},r+=c((i=n.intlMessage||e.intlMessage,i?i.call(e,s):l.call(e,"intlMessage",s)))+'">\n	',r}function b(e,t){var r="",i,s;return r+='\n		<a href="',(i=n.downloadLink)?i=i.call(e,{hash:{},data:t}):(i=e.downloadLink,i=typeof i===h?i.apply(e):i),r+=c(i)+'" title="',s={hash:{intlName:"photo-page-scrappy.DOWNLOAD_THIS_PHOTO"},data:t},r+=c((i=n.intlMessage||e.intlMessage,i?i.call(e,s):l.call(e,"intlMessage",s)))+'">\n	',r}function w(e,t){var r="",i,s;return r+='\n		<div class="display-obscured-download-sizes">\n			',s={hash:{},data:t},r+=c((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.downloadItems,s):l.call(e,"renderTrustedMarkup",e.downloadItems,s)))+"\n		</div>\n	",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=this,l=n.helperMissing,c=this.escapeExpression,h="function";a={hash:{},data:i},s+=c((o=n.outlet||t.outlet,o?o.call(t,t["vr-engagement-view"],a):l.call(t,"outlet",t["vr-engagement-view"],a)))+"\n\n",u=n["if"].call(t,t.canCreateWallart,{hash:{},inverse:f.noop,fn:f.program(1,p,i),data:i});if(u||u===0)s+=u;s+="\n\n",u=n["if"].call(t,t.viewerIsOwner,{hash:{},inverse:f.program(6,m,i),fn:f.program(4,v,i),data:i});if(u||u===0)s+=u;s+="\n\n",a={hash:{},data:i},s+=c((o=n.outlet||t.outlet,o?o.call(t,t["share-view"],a):l.call(t,"outlet",t["share-view"],a)))+'\n\n<div class="download ',u=n.unless.call(t,t.downloadingAvailable,{hash:{},inverse:f.noop,fn:f.program(8,g,i),data:i});if(u||u===0)s+=u;s+='">\n	',u=n["if"].call(t,t.isVideo,{hash:{},inverse:f.program(12,b,i),fn:f.program(10,y,i),data:i});if(u||u===0)s+=u;s+='\n			<i class="ui-icon-download"></i>\n		</a>\n\n	',u=n["if"].call(t,t.downloadItems,{hash:{},inverse:f.noop,fn:f.program(14,w,i),data:i});if(u||u===0)s+=u;return s+="\n\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-engagement",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
